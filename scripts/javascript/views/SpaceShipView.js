(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["backbone","constants"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(e,t,n,r){return this.mPaper=e,this.$window=t,this.winWidth=n,this.position=r,this.render(),this.addKeyListeners(),this.moving=!1},r.prototype.addKeyListeners=function(){var e=this;return this.$window.keydown(function(t){var r,i;i=t.which;switch(i){case n.LEFT_ARROW:r=n.LEFT;break;case n.RIGHT_ARROW:r=n.RIGHT}return e.move(r)}),this.$window.keyup(function(t){var r,i;i=t.which;switch(i){case n.LEFT_ARROW:r=n.LEFT;break;case n.RIGHT_ARROW:r=n.RIGHT}return e.stop(r)})},r.prototype.render=function(){return this.mSelf=this.mPaper.image("img/rocket.png",this.position.x,this.position.y,84,97)},r.prototype.move=function(e){var t,r,i,s,o,u;if(e===this.moving)return;if(e==null)return;this.mSelf.stop(),this.moving=e,t=this.mSelf.getBBox(),s=t.width;switch(e){case n.LEFT:i=-20,o=Math.min(t.x,this.winWidth);break;case n.RIGHT:i=this.winWidth-80,o=Math.max(t.x,0)}return r=Math.abs(o-i),u=r/n.SPEED,this.mSelf.animate({x:""+i},u)},r.prototype.stop=function(e){if(e==null)return;if(e===this.moving)return this.moving=!1,this.mSelf.stop()},r.prototype.getBBox=function(){return this.mSelf.getBBox()},r}(e.View)})}).call(this)