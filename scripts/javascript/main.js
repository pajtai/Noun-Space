/*!
 * Lo-Dash v0.7.0 <http://lodash.com>
 * Copyright 2012 John-David Dalton <http://allyoucanleet.com/>
 * Based on Underscore.js 1.3.3, copyright 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
 * <http://documentcloud.github.com/underscore>
 * Available under MIT license <http://lodash.com/license>
 */

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

// ┌──────────────────────────────────────────────────────────────────────────────────────┐ \\
// │ Eve 0.3.4 - JavaScript Events Library                                                │ \\
// ├──────────────────────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://dmitry.baranovskiy.com/)          │ \\
// │ Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license. │ \\
// └──────────────────────────────────────────────────────────────────────────────────────┘ \\

// ┌─────────────────────────────────────────────────────────────────────┐ \\
// │ "Raphaël 2.1.0" - JavaScript Vector Library                         │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\
// └─────────────────────────────────────────────────────────────────────┘ \\

// ┌─────────────────────────────────────────────────────────────────────┐ \\
// │ Raphaël - JavaScript Vector Library                                 │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ SVG Module                                                          │ \\
// ├─────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright (c) 2008-2011 Dmitry Baranovskiy (http://raphaeljs.com)   │ \\
// │ Copyright (c) 2008-2011 Sencha Labs (http://sencha.com)             │ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license. │ \\
// └─────────────────────────────────────────────────────────────────────┘ \\

(function(e,t){function Et(e){return new St(e)}function St(e){if(e&&e.__wrapped__)return e;this.__wrapped__=e}function Dt(e,t,n){t||(t=0);var r=e.length,i=r-t>=(n||p),s=i?{}:e;if(i){var o,u=t-1;while(++u<r)o=e[u]+"",(_.call(s,o)?s[o]:s[o]=[]).push(e[u])}return function(e){if(i){var n=e+"";return _.call(s,n)&&$n(s[n],e)>-1}return $n(s,e,t)>-1}}function Pt(){var e,t,n,r=-1,i=arguments.length,s={bottom:"",exit:"",init:"",top:"",arrayBranch:{beforeLoop:""},objectBranch:{beforeLoop:""}};while(++r<i){e=arguments[r];for(t in e)n=(n=e[t])==null?"":n,/beforeLoop|inLoop/.test(t)?(typeof n=="string"&&(n={array:n,object:n}),s.arrayBranch[t]=n.array||"",s.objectBranch[t]=n.object||""):s[t]=n}var o=s.args,a=/^[^,]+/.exec(o)[0],f=s.useStrict;s.firstArg=a,s.hasDontEnumBug=nt,s.isKeysFast=ht,s.noArgsEnum=st,s.shadowed=C,s.useHas=s.useHas!==!1,s.useStrict=f==null?pt:f,s.noCharByIndex==null&&(s.noCharByIndex=at),s.exit||(s.exit="if (!"+a+") return result");if(a!="collection"||!s.arrayBranch.inLoop)s.arrayBranch=null;var l=Function("arrayLikeClasses, ArrayProto, bind, compareAscending, concat, forIn, hasOwnProperty, identity, indexOf, isArguments, isArray, isFunction, isPlainObject, iteratorBind, objectClass, objectTypes, nativeKeys, propertyIsEnumerable, slice, stringClass, toString","var callee = function("+o+") {\n"+xt(s)+"\n};\n"+"return callee");return l(vt,u,lr,Ht,M,en,_,Sr,$n,Xt,Vt,$t,Kt,It,G,bt,R,P,H,Z,B)}function Ht(e,n){var r=e.index,i=n.index;e=e.criteria,n=n.criteria;if(e!==n){if(e>n||e===t)return 1;if(e<n||n===t)return-1}return r<i?-1:1}function Bt(e,t){return O[t]}function jt(e){return"\\"+wt[e]}function Ft(e){return gt[e]}function It(e,t){return function(n,r,i){return e.call(t,n,r,i)}}function qt(){}function Rt(e,t){if(e&&v.test(t))return"<e%-"+t+"%>";var n=O.length;return O[n]="' +\n__e("+t+") +\n'",L+n+A}function Ut(e,t,n,r){if(r){var i=O.length;return O[i]="';\n"+r+";\n__p += '",L+i+A}return t?Rt(null,t):zt(null,n)}function zt(e,t){if(e&&v.test(t))return"<e%="+t+"%>";var n=O.length;return O[n]="' +\n((__t = ("+t+")) == null ? '' : __t) +\n'",L+n+A}function Wt(e){return yt[e]}function Xt(e){return B.call(e)==X}function $t(e){return typeof e=="function"}function Jt(e,t){var n=!1;if(!e||typeof e!="object"||!t&&Xt(e))return n;var r=e.constructor;return(!ft||typeof e.toString=="function"||typeof (e+"")!="string")&&(!$t(r)||r instanceof r)?it?(en(e,function(e,t,r){return n=!_.call(r,t),!1}),n===!1):(en(e,function(e,t){n=t}),n===!1||_.call(e,n)):n}function Gt(e,t,n,r){if(e==null)return e;n&&(t=!1),r||(r={thorough:null}),r.thorough==null&&(r.thorough=!!(a.clone||l.clone||c.clone));var i=bt[typeof e];if((i||r.thorough)&&e.clone&&$t(e.clone))return r.thorough=null,e.clone(t);if(i){var s=B.call(e);if(!mt[s]||ot&&Xt(e))return e;var o=s==V;i=o||(s==G?Kt(e,!0):i)}if(!i||!t)return i?o?H.call(e):Zt({},e):e;var u=e.constructor;switch(s){case $:return new u(e==1);case J:return new u(+e);case Q:case Z:return new u(e);case Y:return u(e.source,w.exec(e))}var f=r.clones||(r.clones=[]),h=r.sources||(r.sources=[]),p=f.length;while(p--)if(h[p]==e)return f[p];var d=o?u(p=e.length):{};f.push(d),h.push(e);if(o){var v=-1;while(++v<p)d[v]=Gt(e[v],t,null,r)}else tn(e,function(e,n){d[n]=Gt(e,t,null,r)});return d}function rn(e,t){return e?_.call(e,t):!1}function on(e){return e===!0||e===!1||B.call(e)==$}function un(e){return B.call(e)==J}function an(e){return e?e.nodeType===1:!1}function ln(e,t,n){if(e==null||t==null)return e===t;n||(n={thorough:null}),n.thorough==null&&(n.thorough=!!(a.isEqual||l.isEqual||c.isEqual));if(bt[typeof e]||bt[typeof t]||n.thorough){e=e.__wrapped__||e,t=t.__wrapped__||t;if(e.isEqual&&$t(e.isEqual))return n.thorough=null,e.isEqual(t);if(t.isEqual&&$t(t.isEqual))return n.thorough=null,t.isEqual(e)}if(e===t)return e!==0||1/e==1/t;var r=B.call(e);if(r!=B.call(t))return!1;switch(r){case $:case J:return+e==+t;case Q:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case Y:case Z:return e==t+""}var i=vt[r];if(ot&&!i&&(i=Xt(e))&&!Xt(t))return!1;if(!i&&(r!=G||ft&&(typeof e.toString!="function"&&typeof (e+"")=="string"||typeof t.toString!="function"&&typeof (t+"")=="string")))return!1;var s=n.stackA||(n.stackA=[]),o=n.stackB||(n.stackB=[]),u=s.length;while(u--)if(s[u]==e)return o[u]==t;var f=-1,h=!0,p=0;s.push(e),o.push(t);if(i){p=e.length,h=p==t.length;if(h)while(p--)if(!(h=ln(e[p],t[p],n)))break;return h}var d=e.constructor,v=t.constructor;if(d!=v&&!($t(d)&&d instanceof d&&$t(v)&&v instanceof v))return!1;for(var m in e)if(_.call(e,m)){p++;if(!_.call(t,m)||!ln(e[m],t[m],n))return!1}for(m in t)if(_.call(t,m)&&!(p--))return!1;if(nt)while(++f<7){m=C[f];if(_.call(e,m)&&(!_.call(t,m)||!ln(e[m],t[m],n)))return!1}return!0}function cn(e){return q(e)&&B.call(e)==Q}function hn(e){return e?bt[typeof e]:!1}function pn(e){return B.call(e)==Q&&e!=+e}function dn(e){return e===null}function vn(e){return B.call(e)==Q}function mn(e){return B.call(e)==Y}function gn(e){return B.call(e)==Z}function yn(e){return e===t}function Bn(e,t,n,r){if(!e)return n;var i=e.length,s=arguments.length<3;r&&(t=It(t,r));if(i>-1&&i===i>>>0){var o=at&&B.call(e)==Z?e.split(""):e;i&&s&&(n=o[--i]);while(i--)n=t(n,o[i],i,e);return n}var u,a=bn(e);i=a.length,i&&s&&(n=e[a[--i]]);while(i--)u=a[i],n=t(n,e[u],u,e);return n}function Fn(e){if(!e)return 0;var t=e.length;return t>-1&&t===t>>>0?t:bn(e).length}function Rn(e){if(!e)return[];if(e.toArray&&$t(e.toArray))return e.toArray();var t=e.length;return t>-1&&t===t>>>0?(ut?B.call(e)==Z:typeof e=="string")?e.split(""):H.call(e):Tn(e)}function zn(e){var t=[];if(!e)return t;var n=-1,r=e.length;while(++n<r)e[n]&&t.push(e[n]);return t}function Wn(e){var t=[];if(!e)return t;var n=-1,r=e.length,i=M.apply(t,arguments),s=Dt(i,r);while(++n<r)s(e[n])||t.push(e[n]);return t}function Xn(e,t,n){if(e)return t==null||n?e[0]:H.call(e,0,t)}function Vn(e,t){var n=[];if(!e)return n;var r,i=-1,s=e.length;while(++i<s)r=e[i],Vt(r)?D.apply(n,t?r:Vn(r)):n.push(r);return n}function $n(e,t,n){if(!e)return-1;var r=-1,i=e.length;if(n){if(typeof n!="number")return r=ir(e,t),e[r]===t?r:-1;r=(n<0?U(0,i+n):n)-1}while(++r<i)if(e[r]===t)return r;return-1}function Jn(e,t,n){return e?H.call(e,0,-(t==null||n?1:t)):[]}function Kn(e){var t=[];if(!e)return t;var n,r=arguments.length,i=[],s=-1,o=e.length;e:while(++s<o){n=e[s];if($n(t,n)<0){for(var u=1;u<r;u++)if(!(i[u]||(i[u]=Dt(arguments[u])))(n))continue e;t.push(n)}}return t}function Qn(e,t,n){if(e){var r=e.length;return t==null||n?e[r-1]:H.call(e,-t||r)}}function Gn(e,t,n){if(!e)return-1;var r=e.length;n&&typeof n=="number"&&(r=(n<0?U(0,r+n):z(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function Yn(e,t,n){var r=-Infinity,i=r;if(!e)return i;var s,o=-1,u=e.length;if(!t){while(++o<u)e[o]>i&&(i=e[o]);return i}n&&(t=It(t,n));while(++o<u)s=t(e[o],o,e),s>r&&(r=s,i=e[o]);return i}function Zn(e,t,n){var r=Infinity,i=r;if(!e)return i;var s,o=-1,u=e.length;if(!t){while(++o<u)e[o]<i&&(i=e[o]);return i}n&&(t=It(t,n));while(++o<u)s=t(e[o],o,e),s<r&&(r=s,i=e[o]);return i}function er(e,t){if(!e)return{};var n=-1,r=e.length,i={};while(++n<r)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i}function tr(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var r=-1,i=U(0,Math.ceil((t-e)/n)),s=Array(i);while(++r<i)s[r]=e,e+=n;return s}function nr(e,t,n){return e?H.call(e,t==null||n?1:t):[]}function rr(e){if(!e)return[];var t,n=-1,r=e.length,i=Array(r);while(++n<r)t=F(W()*(n+1)),i[n]=i[t],i[t]=e[n];return i}function ir(e,t,n,r){if(!e)return 0;var i,s=0,o=e.length;if(n){r&&(n=lr(n,r)),t=n(t);while(s<o)i=s+o>>>1,n(e[i])<t?s=i+1:o=i}else while(s<o)i=s+o>>>1,e[i]<t?s=i+1:o=i;return s}function sr(){var e=-1,t=[],n=M.apply(t,arguments),r=n.length;while(++e<r)$n(t,n[e])<0&&t.push(n[e]);return t}function or(e,t,n,r){var i=[];if(!e)return i;var s,o=-1,u=e.length,a=[];typeof t=="function"&&(r=n,n=t,t=!1),n?r&&(n=It(n,r)):n=Sr;while(++o<u){s=n(e[o],o,e);if(t?!o||a[a.length-1]!==s:$n(a,s)<0)a.push(s),i.push(e[o])}return i}function ur(e){var t=[];if(!e)return t;var n=-1,r=e.length,i=Dt(arguments,1,20);while(++n<r)i(e[n])||t.push(e[n]);return t}function ar(e){if(!e)return[];var t=-1,n=Yn(Pn(arguments,"length")),r=Array(n);while(++t<n)r[t]=Pn(arguments,t);return r}function fr(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}}function lr(e,t){function s(){var o=arguments,u=t;r||(e=t[n]),i.length&&(o=o.length?i.concat(H.call(o)):i);if(this instanceof s){qt.prototype=e.prototype,u=new qt;var a=e.apply(u,o);return a&&bt[typeof a]?a:u}return e.apply(u,o)}var n,r=$t(e);if(!r)n=t,t=e;else if(ct||j&&arguments.length>2)return j.call.apply(j,arguments);var i=H.call(arguments,2);return s}function hr(){var e=arguments;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function pr(e,t,n){function u(){o=null,n||(i=e.apply(s,r))}var r,i,s,o;return function(){var a=n&&!o;return r=arguments,s=this,et(o),o=tt(u,t),a&&(i=e.apply(s,r)),i}}function dr(e,n){var r=H.call(arguments,2);return tt(function(){return e.apply(t,r)},n)}function vr(e){var n=H.call(arguments,1);return tt(function(){return e.apply(t,n)},1)}function mr(e,t){var n={};return function(){var r=t?t.apply(this,arguments):arguments[0];return _.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function gr(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}function yr(e){var t=H.call(arguments,1),n=t.length;return function(){var r,i=arguments;return i.length&&(t.length=n,D.apply(t,i)),r=t.length==1?e.call(this,t[0]):e.apply(this,t),t.length=n,r}}function br(e,t){function u(){o=new Date,s=null,r=e.apply(i,n)}var n,r,i,s,o=0;return function(){var a=new Date,f=t-(a-o);return n=arguments,i=this,f<=0?(o=a,r=e.apply(i,n)):s||(s=tt(u,f)),r}}function wr(e,t){return function(){var n=[e];return arguments.length&&D.apply(n,arguments),t.apply(this,n)}}function Er(e){return e==null?"":(e+"").replace(T,Ft)}function Sr(e){return e}function xr(e){On(nn(e),function(t){var n=Et[t]=e[t];St.prototype[t]=function(){var e=[this.__wrapped__];arguments.length&&D.apply(e,arguments);var t=n.apply(Et,e);return this.__chain__&&(t=new St(t),t.__chain__=!0),t}})}function Tr(){return e._=d,this}function Nr(e,t){return e==null&&t==null?W():(e=+e||0,t==null&&(t=e,e=0),e+F(W()*((+t||0)-e+1)))}function Cr(e,t){if(!e)return null;var n=e[t];return $t(n)?e[t]():n}function kr(e,t,o){o||(o={}),e+="";var u,a,f=o.escape,l=o.evaluate,c=o.interpolate,h=Et.templateSettings,p=o.variable||h.variable,d=p;f==null&&(f=h.escape),l==null&&(l=h.evaluate||!1),c==null&&(c=h.interpolate),f&&(e=e.replace(f,Rt)),c&&(e=e.replace(c,zt)),l!=n&&(n=l,s=RegExp("<e%-([\\s\\S]+?)%>|<e%=([\\s\\S]+?)%>"+(l?"|"+l.source:""),"g")),u=O.length,e=e.replace(s,Ut),u=u!=O.length,e="__p += '"+e.replace(N,jt).replace(x,Bt)+"';\n",O.length=0,d||(p=r||"obj",u?e="with ("+p+") {\n"+e+"\n}\n":(p!=r&&(r=p,i=RegExp("(\\(\\s*)"+p+"\\."+p+"\\b","g")),e=e.replace(E,"$&"+p+".").replace(i,"$1__d"))),e=(u?e.replace(g,""):e).replace(y,"$1").replace(b,"$1;"),e="function("+p+") {\n"+(d?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":(d?"":", __d = "+p+"."+p+" || "+p)+";\n")+e+"return __p\n}",dt&&(e+="\n//@ sourceURL=/lodash/template/source["+k++ +"]");try{a=Function("_","return "+e)(Et)}catch(v){throw v.source=e,v}return t?a(t):(a.source=e,a)}function Lr(e,t,n){var r=-1;if(n)while(++r<e)t.call(n,r);else while(++r<e)t(r)}function Ar(e){return e==null?"":(e+"").replace(m,Wt)}function Or(e){var t=h++;return e?e+t:t}function Mr(e){return e=new St(e),e.__chain__=!0,e}function _r(e,t){return t(e),e}function Dr(){return this.__chain__=!0,this}function Pr(){return this.__wrapped__}var n,r,i,s,o=typeof exports=="object"&&exports&&(typeof global=="object"&&global&&global==global.global&&(e=global),exports),u=Array.prototype,a=Boolean.prototype,f=Object.prototype,l=Number.prototype,c=String.prototype,h=0,p=30,d=e._,v=/[-?+=!~*%&^<>|{(\/]|\[\D|\b(?:delete|in|instanceof|new|typeof|void)\b/,m=/&(?:amp|lt|gt|quot|#x27);/g,g=/\b__p \+= '';/g,y=/\b(__p \+=) '' \+/g,b=/(__e\(.*?\)|\b__t\)) \+\n'';/g,w=/\w*$/,E=/(?:__e|__t = )\(\s*(?![\d\s"']|this\.)/g,S=RegExp("^"+(f.valueOf+"").replace(/[.*+?^=!:${}()|[\]\/\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),x=/__token(\d+)__/g,T=/[&<>"']/g,N=/['\n\r\t\u2028\u2029\\]/g,C=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],k=0,L="__token",A="__",O=[],M=u.concat,_=f.hasOwnProperty,D=u.push,P=f.propertyIsEnumerable,H=u.slice,B=f.toString,j=S.test(j=H.bind)&&j,F=Math.floor,I=S.test(I=Array.isArray)&&I,q=e.isFinite,R=S.test(R=Object.keys)&&R,U=Math.max,z=Math.min,W=Math.random,X="[object Arguments]",V="[object Array]",$="[object Boolean]",J="[object Date]",K="[object Function]",Q="[object Number]",G="[object Object]",Y="[object RegExp]",Z="[object String]",et=e.clearTimeout,tt=e.setTimeout,nt,rt,it,st=!0;(function(){function n(){this.x=1}var e={0:1,length:1},t=[];n.prototype={valueOf:1,y:1};for(var r in new n)t.push(r);for(r in arguments)st=!r;nt=(t+"").length<4,it=t[0]!="x",rt=(t.splice.call(e,0,1),e[0])})(1);var ot=!Xt(arguments),ut=H.call("x")[0]!="x",at="x"[0]+Object("x")[0]!="xx";try{var ft=({toString:0}+"",B.call(e.document||0)==G)}catch(lt){}var ct=j&&/\n|Opera/.test(j+B.call(e.opera)),ht=R&&/^.+$|true/.test(R+!!e.attachEvent),pt=!ct;try{var dt=(Function("//@")(),!e.attachEvent)}catch(lt){}var vt={};vt[$]=vt[J]=vt[K]=vt[Q]=vt[G]=vt[Y]=!1,vt[X]=vt[V]=vt[Z]=!0;var mt={};mt[X]=mt[K]=!1,mt[V]=mt[$]=mt[J]=mt[Q]=mt[G]=mt[Y]=mt[Z]=!0;var gt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},yt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'"},bt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1,unknown:!0},wt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};Et.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""};var xt=kr("<% if (useStrict) { %>'use strict';\n<% } %>var index, value, iteratee = <%= firstArg %>, result<% if (init) { %> = <%= init %><% } %>;\n<%= exit %>;\n<%= top %>;\n<% if (arrayBranch) { %>var length = iteratee.length; index = -1;  <% if (objectBranch) { %>\nif (length > -1 && length === length >>> 0) {<% } %>  <% if (noCharByIndex) { %>\n  if (toString.call(iteratee) == stringClass) {\n    iteratee = iteratee.split('')\n  }  <% } %>\n  <%= arrayBranch.beforeLoop %>;\n  while (++index < length) {\n    value = iteratee[index];\n    <%= arrayBranch.inLoop %>\n  }  <% if (objectBranch) { %>\n}<% } %><% } %><% if (objectBranch) { %>  <% if (arrayBranch) { %>\nelse {  <%  } else if (noArgsEnum) { %>\n  var length = iteratee.length; index = -1;\n  if (length && isArguments(iteratee)) {\n    while (++index < length) {\n      value = iteratee[index += ''];\n      <%= objectBranch.inLoop %>\n    }\n  } else {  <% } %>  <% if (!hasDontEnumBug) { %>\n  var skipProto = typeof iteratee == 'function' && \n    propertyIsEnumerable.call(iteratee, 'prototype');\n  <% } %>  <% if (isKeysFast && useHas) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iteratee] ? nativeKeys(iteratee) : [],\n      length = ownProps.length;\n\n  <%= objectBranch.beforeLoop %>;\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    <% if (!hasDontEnumBug) { %>if (!(skipProto && index == 'prototype')) {\n  <% } %>    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n    <% if (!hasDontEnumBug) { %>}\n<% } %>  }  <% } else { %>\n  <%= objectBranch.beforeLoop %>;\n  for (index in iteratee) {<%    if (!hasDontEnumBug || useHas) { %>\n    if (<%      if (!hasDontEnumBug) { %>!(skipProto && index == 'prototype')<% }      if (!hasDontEnumBug && useHas) { %> && <% }      if (useHas) { %>hasOwnProperty.call(iteratee, index)<% }    %>) {    <% } %>\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>;\n    <% if (!hasDontEnumBug || useHas) { %>}\n<% } %>  }  <% } %>  <% if (hasDontEnumBug) { %>\n\n  var ctor = iteratee.constructor;\n    <% for (var k = 0; k < 7; k++) { %>\n  index = '<%= shadowed[k] %>';\n  if (<%      if (shadowed[k] == 'constructor') {        %>!(ctor && ctor.prototype === iteratee) && <%      } %>hasOwnProperty.call(iteratee, index)) {\n    value = iteratee[index];\n    <%= objectBranch.inLoop %>\n  }    <% } %>  <% } %>  <% if (arrayBranch || noArgsEnum) { %>\n}<% } %><% } %>\n<%= bottom %>;\nreturn result"),Tt={args:"collection, callback, thisArg",init:"collection",top:"if (!callback) {\n  callback = identity\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"if (callback(value, index, collection) === false) return result"},Nt={init:"{}",top:"var prop;\nif (typeof callback != 'function') {\n  var valueProp = callback;\n  callback = function(value) { return value[valueProp] }\n}\nelse if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop]++ : result[prop] = 1)"},Ct={init:"true",inLoop:"if (!callback(value, index, collection)) return !result"},kt={useHas:!1,useStrict:!1,args:"object",init:"object",top:"for (var argsIndex = 1, argsLength = arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"result[index] = value",bottom:"  }\n}"},Lt={init:"[]",inLoop:"callback(value, index, collection) && result.push(value)"},At={top:"if (thisArg) callback = iteratorBind(callback, thisArg)"},Ot={inLoop:{object:Tt.inLoop}},Mt={init:"",exit:"if (!collection) return []",beforeLoop:{array:"result = Array(length)",object:"result = "+(ht?"Array(length)":"[]")},inLoop:{array:"result[index] = callback(value, index, collection)",object:"result"+(ht?"[ownIndex] = ":".push")+"(callback(value, index, collection))"}},_t={useHas:!1,args:"object, callback, thisArg",init:"{}",top:"var isFunc = typeof callback == 'function';\nif (!isFunc) {\n  var props = concat.apply(ArrayProto, arguments)\n} else if (thisArg) {\n  callback = iteratorBind(callback, thisArg)\n}",inLoop:"if (isFunc\n  ? !callback(value, index, object)\n  : indexOf(props, index) < 0\n) result[index] = value"};ot&&(Xt=function(e){return!!e&&!!_.call(e,"callee")});var Vt=I||function(e){return B.call(e)==V};$t(/x/)&&($t=function(e){return B.call(e)==K});var Kt=bt.__proto__!=f?Jt:function(e,t){if(!e)return!1;var n=e.valueOf,r=typeof n=="function"&&(r=n.__proto__)&&r.__proto__;return r?e==r||e.__proto__==r&&(t||!Xt(e)):Jt(e)},Qt=Pt({args:"object",init:"[]",inLoop:"result.push(index)"}),Yt=Pt(kt,{inLoop:"if (result[index] == null) "+kt.inLoop}),Zt=Pt(kt),en=Pt(Tt,At,Ot,{useHas:!1}),tn=Pt(Tt,At,Ot),nn=Pt({useHas:!1,args:"object",init:"[]",inLoop:"if (isFunction(value)) result.push(index)",bottom:"result.sort()"}),sn=Pt({args:"object",init:"{}",inLoop:"result[value] = index"}),fn=Pt({args:"value",init:"true",top:"var className = toString.call(value),\n    length = value.length;\nif (arrayLikeClasses[className]"+(ot?" || isArguments(value)":"")+" ||\n"+"  (className == objectClass && length > -1 && length === length >>> 0 &&\n"+"  isFunction(value.splice))"+") return !length",inLoop:{object:"return false"}}),bn=R?function(e){var t=typeof e;return t=="function"&&P.call(e,"prototype")?Qt(e):e&&bt[t]?R(e):[]}:Qt,wn=Pt(kt,{args:"object, source, indicator",top:"var isArr, recursive = indicator == isPlainObject,\n    data = recursive ? arguments[3] : { values: [], sources: [] };\nfor (var argsIndex = 1, argsLength = recursive ? 2 : arguments.length; argsIndex < argsLength; argsIndex++) {\n  if (iteratee = arguments[argsIndex]) {",inLoop:"if ((source = value) && ((isArr = isArray(source)) || isPlainObject(source))) {\n  var found = false, values = data.values, sources = data.sources, stackLength = sources.length;\n  while (stackLength--) {\n    if (found = sources[stackLength] == source) break\n  }\n  if (found) {\n    result[index] = values[stackLength]\n  } else {\n    values.push(value = (value = result[index]) && isArr\n      ? (isArray(value) ? value : [])\n      : (isPlainObject(value) ? value : {})\n    );\n    sources.push(source);\n    result[index] = callee(value, source, isPlainObject, data)\n  }\n} else if (source != null) {\n  result[index] = source\n}"}),En=Pt(_t),Sn=Pt({args:"object",init:"[]",inLoop:"result"+(ht?"[ownIndex] = ":".push")+"([index, value])"}),xn=Pt(_t,{top:"if (typeof callback != 'function') {\n  var prop,\n      props = concat.apply(ArrayProto, arguments),\n      length = props.length;\n  for (index = 1; index < length; index++) {\n    prop = props[index];\n    if (prop in object) result[prop] = object[prop]\n  }\n} else {\n  if (thisArg) callback = iteratorBind(callback, thisArg)",inLoop:"if (callback(value, index, object)) result[index] = value",bottom:"}"}),Tn=Pt({args:"object",init:"[]",inLoop:"result.push(value)"}),Nn=Pt({args:"collection, target",init:"false",noCharByIndex:!1,beforeLoop:{array:"if (toString.call(collection) == stringClass) return collection.indexOf(target) > -1"},inLoop:"if (value === target) return true"}),Cn=Pt(Tt,Nt),kn=Pt(Tt,Ct),Ln=Pt(Tt,Lt),An=Pt(Tt,At,{init:"",inLoop:"if (callback(value, index, collection)) return value"}),On=Pt(Tt,At),Mn=Pt(Tt,Nt,{inLoop:"prop = callback(value, index, collection);\n(hasOwnProperty.call(result, prop) ? result[prop] : result[prop] = []).push(value)"}),_n=Pt(Mt,{args:"collection, methodName",top:"var args = slice.call(arguments, 2),\n    isFunc = typeof methodName == 'function'",inLoop:{array:"result[index] = (isFunc ? methodName : value[methodName]).apply(value, args)",object:"result"+(ht?"[ownIndex] = ":".push")+"((isFunc ? methodName : value[methodName]).apply(value, args))"}}),Dn=Pt(Tt,Mt),Pn=Pt(Mt,{args:"collection, property",inLoop:{array:"result[index] = value[property]",object:"result"+(ht?"[ownIndex] = ":".push")+"(value[property])"}}),Hn=Pt({args:"collection, callback, accumulator, thisArg",init:"accumulator",top:"var noaccum = arguments.length < 3;\nif (thisArg) callback = iteratorBind(callback, thisArg)",beforeLoop:{array:"if (noaccum) result = iteratee[++index]"},inLoop:{array:"result = callback(result, value, index, collection)",object:"result = noaccum\n  ? (noaccum = false, value)\n  : callback(result, value, index, collection)"}}),jn=Pt(Tt,Lt,{inLoop:"!"+Lt.inLoop}),In=Pt(Tt,Ct,{init:"false",inLoop:Ct.inLoop.replace("!","")}),qn=Pt(Tt,Nt,Mt,{inLoop:{array:"result[index] = {\n  criteria: callback(value, index, collection),\n  index: index,\n  value: value\n}",object:"result"+(ht?"[ownIndex] = ":".push")+"({\n"+"  criteria: callback(value, index, collection),\n"+"  index: index,\n"+"  value: value\n"+"})"},bottom:"result.sort(compareAscending);\nlength = result.length;\nwhile (length--) {\n  result[length] = result[length].value\n}"}),Un=Pt(Lt,{args:"collection, properties",top:"var props = [];\nforIn(properties, function(value, prop) { props.push(prop) });\nvar propsLength = props.length",inLoop:"for (var prop, pass = true, propIndex = 0; propIndex < propsLength; propIndex++) {\n  prop = props[propIndex];\n  if (!(pass = value[prop] === properties[prop])) break\n}\npass && result.push(value)"}),cr=Pt({useHas:!1,useStrict:!1,args:"object",init:"object",top:"var funcs = arguments,\n    length = funcs.length;\nif (length > 1) {\n  for (var index = 1; index < length; index++) {\n    result[funcs[index]] = bind(result[funcs[index]], result)\n  }\n  return result\n}",inLoop:"if (isFunction(result[index])) {\n  result[index] = bind(result[index], result)\n}"});Et.VERSION="0.7.0",Et.after=fr,Et.bind=lr,Et.bindAll=cr,Et.chain=Mr,Et.clone=Gt,Et.compact=zn,Et.compose=hr,Et.contains=Nn,Et.countBy=Cn,Et.debounce=pr,Et.defaults=Yt,Et.defer=vr,Et.delay=dr,Et.difference=Wn,Et.escape=Er,Et.every=kn,Et.extend=Zt,Et.filter=Ln,Et.find=An,Et.first=Xn,Et.flatten=Vn,Et.forEach=On,Et.forIn=en,Et.forOwn=tn,Et.functions=nn,Et.groupBy=Mn,Et.has=rn,Et.identity=Sr,Et.indexOf=$n,Et.initial=Jn,Et.intersection=Kn,Et.invert=sn,Et.invoke=_n,Et.isArguments=Xt,Et.isArray=Vt,Et.isBoolean=on,Et.isDate=un,Et.isElement=an,Et.isEmpty=fn,Et.isEqual=ln,Et.isFinite=cn,Et.isFunction=$t,Et.isNaN=pn,Et.isNull=dn,Et.isNumber=vn,Et.isObject=hn,Et.isRegExp=mn,Et.isString=gn,Et.isUndefined=yn,Et.keys=bn,Et.last=Qn,Et.lastIndexOf=Gn,Et.map=Dn,Et.max=Yn,Et.memoize=mr,Et.merge=wn,Et.min=Zn,Et.mixin=xr,Et.noConflict=Tr,Et.object=er,Et.omit=En,Et.once=gr,Et.pairs=Sn,Et.partial=yr,Et.pick=xn,Et.pluck=Pn,Et.random=Nr,Et.range=tr,Et.reduce=Hn,Et.reduceRight=Bn,Et.reject=jn,Et.rest=nr,Et.result=Cr,Et.shuffle=rr,Et.size=Fn,Et.some=In,Et.sortBy=qn,Et.sortedIndex=ir,Et.tap=_r,Et.template=kr,Et.throttle=br,Et.times=Lr,Et.toArray=Rn,Et.unescape=Ar,Et.union=sr,Et.uniq=or,Et.uniqueId=Or,Et.values=Tn,Et.where=Un,Et.without=ur,Et.wrap=wr,Et.zip=ar,Et.all=kn,Et.any=In,Et.collect=Dn,Et.detect=An,Et.drop=nr,Et.each=On,Et.foldl=Hn,Et.foldr=Bn,Et.head=Xn,Et.include=Nn,Et.inject=Hn,Et.methods=nn,Et.select=Ln,Et.tail=nr,Et.take=Xn,Et.unique=or,Et._iteratorTemplate=xt,Et._shimKeys=Qt,St.prototype=Et.prototype,xr(Et),St.prototype.chain=Dr,St.prototype.value=Pr,On(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];St.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),rt&&e.length===0&&delete e[0],this.__chain__&&(e=new St(e),e.__chain__=!0),e}}),On(["concat","join","slice"],function(e){var t=u[e];St.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new St(n),n.__chain__=!0),n}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e._=Et,define("lodash",[],function(){return Et})):o?typeof module=="object"&&module&&module.exports==o?(module.exports=Et)._=Et:o._=Et:e._=Et})(this),function(){var e=this,t=e.Backbone,n=Array.prototype.slice,r=Array.prototype.splice,i;typeof exports!="undefined"?i=exports:i=e.Backbone={},i.VERSION="0.9.2";var s=e._;!s&&typeof require!="undefined"&&(s=require("underscore"));var o=e.jQuery||e.Zepto||e.ender;i.setDomLibrary=function(e){o=e},i.noConflict=function(){return e.Backbone=t,this},i.emulateHTTP=!1,i.emulateJSON=!1;var u=/\s+/,a=i.Events={on:function(e,t,n){var r,i,s,o,a;if(!t)return this;e=e.split(u),r=this._callbacks||(this._callbacks={});while(i=e.shift())a=r[i],s=a?a.tail:{},s.next=o={},s.context=n,s.callback=t,r[i]={tail:o,next:a?a.next:s};return this},off:function(e,t,n){var r,i,o,a,f,l;if(!(i=this._callbacks))return;if(!(e||t||n))return delete this._callbacks,this;e=e?e.split(u):s.keys(i);while(r=e.shift()){o=i[r],delete i[r];if(!o||!t&&!n)continue;a=o.tail;while((o=o.next)!==a)f=o.callback,l=o.context,(t&&f!==t||n&&l!==n)&&this.on(r,f,l)}return this},trigger:function(e){var t,r,i,s,o,a,f;if(!(i=this._callbacks))return this;a=i.all,e=e.split(u),f=n.call(arguments,1);while(t=e.shift()){if(r=i[t]){s=r.tail;while((r=r.next)!==s)r.callback.apply(r.context||this,f)}if(r=a){s=r.tail,o=[t].concat(f);while((r=r.next)!==s)r.callback.apply(r.context||this,o)}}return this}};a.bind=a.on,a.unbind=a.off;var f=i.Model=function(e,t){var n;e||(e={}),t&&t.parse&&(e=this.parse(e));if(n=C(this,"defaults"))e=s.extend({},n,e);t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=s.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=s.clone(this.attributes),this.initialize.apply(this,arguments)};s.extend(f.prototype,a,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return s.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.get(e);return this._escapedAttributes[e]=s.escape(n==null?"":""+n)},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,o;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n||(n={});if(!r)return this;r instanceof f&&(r=r.attributes);if(n.unset)for(i in r)r[i]=void 0;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var u=n.changes={},a=this.attributes,l=this._escapedAttributes,c=this._previousAttributes||{};for(i in r){o=r[i];if(!s.isEqual(a[i],o)||n.unset&&s.has(a,i))delete l[i],(n.silent?this._silent:u)[i]=!0;n.unset?delete a[i]:a[i]=o,!s.isEqual(c[i],o)||s.has(a,i)!=s.has(c,i)?(this.changed[i]=o,n.silent||(this._pending[i]=!0)):(delete this.changed[i],delete this._pending[i])}return n.silent||this.change(n),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)},clear:function(e){return(e||(e={})).unset=!0,this.set(s.clone(this.attributes),e)},fetch:function(e){e=e?s.clone(e):{};var t=this,n=e.success;return e.success=function(r,i,s){if(!t.set(t.parse(r,s),e))return!1;n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},save:function(e,t,n){var r,o;s.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n=n?s.clone(n):{};if(n.wait){if(!this._validate(r,n))return!1;o=s.clone(this.attributes)}var u=s.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?u:n))return!1;var a=this,f=n.success;n.success=function(e,t,i){var o=a.parse(e,i);n.wait&&(delete n.wait,o=s.extend(r||{},o));if(!a.set(o,n))return!1;f?f(a,e):a.trigger("sync",a,e,n)},n.error=i.wrapError(n.error,a,n);var l=this.isNew()?"create":"update",c=(this.sync||i.sync).call(this,l,this,n);return n.wait&&this.set(o,u),c},destroy:function(e){e=e?s.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(this.isNew())return r(),!1;e.success=function(i){e.wait&&r(),n?n(t,i):t.trigger("sync",t,i,e)},e.error=i.wrapError(e.error,t,e);var o=(this.sync||i.sync).call(this,"delete",this,e);return e.wait||r(),o},url:function(){var e=C(this,"urlRoot")||C(this.collection,"url")||k();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(e){e||(e={});var t=this._changing;this._changing=!0;for(var n in this._silent)this._pending[n]=!0;var r=s.extend({},e.changes,this._silent);this._silent={};for(var n in r)this.trigger("change:"+n,this,this.get(n),e);if(t)return this;while(!s.isEmpty(this._pending)){this._pending={},this.trigger("change",this,e);for(var n in this.changed){if(this._pending[n]||this._silent[n])continue;delete this.changed[n]}this._previousAttributes=s.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return arguments.length?s.has(this.changed,e):!s.isEmpty(this.changed)},changedAttributes:function(e){if(!e)return this.hasChanged()?s.clone(this.changed):!1;var t,n=!1,r=this._previousAttributes;for(var i in e){if(s.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return s.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=s.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}});var l=i.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})};s.extend(l.prototype,a,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){var n,i,o,u,a,f,l={},c={},h=[];t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,o=e.length;n<o;n++){if(!(u=e[n]=this._prepareModel(e[n],t)))throw new Error("Can't add an invalid model to a collection");a=u.cid,f=u.id;if(l[a]||this._byCid[a]||f!=null&&(c[f]||this._byId[f])){h.push(n);continue}l[a]=c[f]=u}n=h.length;while(n--)e.splice(h[n],1);for(n=0,o=e.length;n<o;n++)(u=e[n]).on("all",this._onModelEvent,this),this._byCid[u.cid]=u,u.id!=null&&(this._byId[u.id]=u);this.length+=o,i=t.at!=null?t.at:this.models.length,r.apply(this.models,[i,0].concat(e)),this.comparator&&this.sort({silent:!0});if(t.silent)return this;for(n=0,o=this.models.length;n<o;n++){if(!l[(u=this.models[n]).cid])continue;t.index=n,u.trigger("add",u,this,t)}return this},remove:function(e,t){var n,r,i,o;t||(t={}),e=s.isArray(e)?e.slice():[e];for(n=0,r=e.length;n<r;n++){o=this.getByCid(e[n])||this.get(e[n]);if(!o)continue;delete this._byId[o.id],delete this._byCid[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return s.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){e||(e={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var t=s.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return s.map(this.models,function(t){return t.get(e)})},reset:function(e,t){e||(e=[]),t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return this._reset(),this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?s.clone(e):{},e.parse===undefined&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r,i,s){t[e.add?"add":"reset"](t.parse(r,s),e),n&&n(t,r)},e.error=i.wrapError(e.error,t,e),(this.sync||i.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t=t?s.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(i,s,o){t.wait&&n.add(i,t),r?r(i,s):i.trigger("sync",e,s,t)},e.save(null,t),e},parse:function(e,t){return e},chain:function(){return s(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){t||(t={});if(e instanceof f)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(n,t),e._validate(e.attributes,t)||(e=!1)}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e=="add"||e=="remove")&&n!=this)return;e=="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments)}});var c=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];s.each(c,function(e){l.prototype[e]=function(){return s[e].apply(s,[this.models].concat(s.toArray(arguments)))}});var h=i.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,d=/\*\w+/g,v=/[-[\]{}()+?.,\\^$|#\s]/g;s.extend(h.prototype,a,{initialize:function(){},route:function(e,t,n){return i.history||(i.history=new m),s.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),i.history.route(e,s.bind(function(r){var s=this._extractParameters(e,r);n&&n.apply(this,s),this.trigger.apply(this,["route:"+t].concat(s)),i.history.trigger("route",this,t,s)},this)),this},navigate:function(e,t){i.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(v,"\\$&").replace(p,"([^/]+)").replace(d,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var m=i.History=function(){this.handlers=[],s.bindAll(this,"checkUrl")},g=/^[#\/]/,y=/msie [\w.]+/;m.started=!1,s.extend(m.prototype,a,{interval:50,getHash:function(e){var t=e?e.location:window.location,n=t.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n)}else e=this.getHash();return e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(g,"")},start:function(e){if(m.started)throw new Error("Backbone.history has already been started");m.started=!0,this.options=s.extend({},{root:"/"},this.options,e),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,r=y.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);r&&(this.iframe=o('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=window.location,u=i.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&i.hash&&(this.fragment=this.getHash().replace(g,""),window.history.replaceState({},document.title,i.protocol+"//"+i.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){o(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t==this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t==this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=s.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!m.started)return!1;if(!t||t===!0)t={trigger:t};var n=(e||"").replace(g,"");if(this.fragment==n)return;this._hasPushState?(n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history[t.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,t.replace),this.iframe&&n!=this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){n?e.replace(e.toString().replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}});var b=i.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName"];s.extend(b.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&o(r).attr(t),n&&o(r).html(n),r},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o?e:o(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=C(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];s.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(w),i=r[1],o=r[2];n=s.bind(n,this),i+=".delegateEvents"+this.cid,o===""?this.$el.bind(i,n):this.$el.delegate(o,i,n)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=s.extend({},this.options,e));for(var t=0,n=E.length;t<n;t++){var r=E[t];e[r]&&(this[r]=e[r])}this.options=e},_ensureElement:function(){if(!this.el){var e=C(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}else this.setElement(this.el,!1)}});var S=function(e,t){var n=N(this,e,t);return n.extend=this.extend,n};f.extend=l.extend=h.extend=b.extend=S;var x={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};i.sync=function(e,t,n){var r=x[e];n||(n={});var u={type:r,dataType:"json"};return n.url||(u.url=C(t,"url")||k()),!n.data&&t&&(e=="create"||e=="update")&&(u.contentType="application/json",u.data=JSON.stringify(t.toJSON())),i.emulateJSON&&(u.contentType="application/x-www-form-urlencoded",u.data=u.data?{model:u.data}:{}),i.emulateHTTP&&(r==="PUT"||r==="DELETE")&&(i.emulateJSON&&(u.data._method=r),u.type="POST",u.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r)}),u.type!=="GET"&&!i.emulateJSON&&(u.processData=!1),o.ajax(s.extend(u,n))},i.wrapError=function(e,t,n){return function(r,i){i=r===t?i:r,e?e(t,i,n):t.trigger("error",t,i,n)}};var T=function(){},N=function(e,t,n){var r;return t&&t.hasOwnProperty("constructor")?r=t.constructor:r=function(){e.apply(this,arguments)},s.extend(r,e),T.prototype=e.prototype,r.prototype=new T,t&&s.extend(r.prototype,t),n&&s.extend(r,n),r.prototype.constructor=r,r.__super__=e.prototype,r},C=function(e,t){return!e||!e[t]?null:s.isFunction(e[t])?e[t]():e[t]},k=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["lodash","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),define("../vendor/eve.0.3.4",[],function(){var e="0.3.4",t="hasOwnProperty",n=/[\.\/]/,r="*",i=function(){},s=function(e,t){return e-t},o,u,a={n:{}},f=function(e,t){var n=a,r=u,i=Array.prototype.slice.call(arguments,2),l=f.listeners(e),c=0,h=!1,p,d=[],v={},m=[],g=o,y=[];o=e,u=0;for(var b=0,w=l.length;b<w;b++)"zIndex"in l[b]&&(d.push(l[b].zIndex),l[b].zIndex<0&&(v[l[b].zIndex]=l[b]));d.sort(s);while(d[c]<0){p=v[d[c++]],m.push(p.apply(t,i));if(u)return u=r,m}for(b=0;b<w;b++){p=l[b];if("zIndex"in p)if(p.zIndex==d[c]){m.push(p.apply(t,i));if(u)break;do{c++,p=v[d[c]],p&&m.push(p.apply(t,i));if(u)break}while(p)}else v[p.zIndex]=p;else{m.push(p.apply(t,i));if(u)break}}return u=r,o=g,m.length?m:null};return f.listeners=function(e){var t=e.split(n),i=a,s,o,u,f,l,c,h,p,d=[i],v=[];for(f=0,l=t.length;f<l;f++){p=[];for(c=0,h=d.length;c<h;c++){i=d[c].n,o=[i[t[f]],i[r]],u=2;while(u--)s=o[u],s&&(p.push(s),v=v.concat(s.f||[]))}d=p}return v},f.on=function(e,t){var r=e.split(n),s=a;for(var o=0,u=r.length;o<u;o++)s=s.n,!s[r[o]]&&(s[r[o]]={n:{}}),s=s[r[o]];s.f=s.f||[];for(o=0,u=s.f.length;o<u;o++)if(s.f[o]==t)return i;return s.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},f.stop=function(){u=1},f.nt=function(e){return e?(new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)")).test(o):o},f.unbind=function(e,i){var s=e.split(n),o,u,f,l,c,h,p,d=[a];for(l=0,c=s.length;l<c;l++)for(h=0;h<d.length;h+=f.length-2){f=[h,1],o=d[h].n;if(s[l]!=r)o[s[l]]&&f.push(o[s[l]]);else for(u in o)o[t](u)&&f.push(o[u]);d.splice.apply(d,f)}for(l=0,c=d.length;l<c;l++){o=d[l];while(o.n){if(i){if(o.f){for(h=0,p=o.f.length;h<p;h++)if(o.f[h]==i){o.f.splice(h,1);break}!o.f.length&&delete o.f}for(u in o.n)if(o.n[t](u)&&o.n[u].f){var v=o.n[u].f;for(h=0,p=v.length;h<p;h++)if(v[h]==i){v.splice(h,1);break}!v.length&&delete o.n[u].f}}else{delete o.f;for(u in o.n)o.n[t](u)&&o.n[u].f&&delete o.n[u].f}o=o.n}}},f.once=function(e,t){var n=function(){var r=t.apply(this,arguments);return f.unbind(e,n),r};return f.on(e,n)},f.version=e,f.toString=function(){return"You are running Eve "+e},f}),define("../vendor/raphael.2.1.0.core",["../vendor/eve.0.3.4"],function(e){function t(r){if(t.is(r,"function"))return n?r():e.on("raphael.DOMload",r);if(t.is(r,M))return t._engine.create[p](t,r.splice(0,3+t.is(r[0],A))).add(r);var i=Array.prototype.slice.call(arguments,0);if(t.is(i[i.length-1],"function")){var s=i.pop();return n?s.call(t._engine.create[p](t,i)):e.on("raphael.DOMload",function(){s.call(t._engine.create[p](t,i))})}return t._engine.create[p](t,arguments)}function pt(e){if(Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[u](n)&&(t[n]=pt(e[n]));return t}function Et(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function St(e,t,n){function r(){var i=Array.prototype.slice.call(arguments,0),s=i.join("␀"),o=r.cache=r.cache||{},a=r.count=r.count||[];return o[u](s)?(Et(a,s),n?n(o[s]):o[s]):(a.length>=1e3&&delete o[a.shift()],a.push(s),o[s]=e[p](t,i),n?n(o[s]):o[s])}return r}function Tt(){return this.hex}function Nt(e,t){var n=[];for(var r=0,i=e.length;i-2*!t>r;r+=2){var s=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?s[3]={x:+e[0],y:+e[1]}:i-2==r&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?s[3]=s[2]:r||(s[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}function kt(e,t,n,r,i){var s=-3*t+9*n-9*r+3*i,o=e*s+6*t-12*n+6*r;return e*o-3*t+3*n}function Lt(e,t,n,r,i,s,o,u,a){a==null&&(a=1),a=a>1?1:a<0?0:a;var f=a/2,l=12,c=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0;for(var d=0;d<l;d++){var v=f*c[d]+f,m=kt(v,e,n,i,o),g=kt(v,t,r,s,u),y=m*m+g*g;p+=h[d]*x.sqrt(y)}return f*p}function At(e,t,n,r,i,s,o,u,a){if(a<0||Lt(e,t,n,r,i,s,o,u)<a)return;var f=1,l=f/2,c=f-l,h,p=.01;h=Lt(e,t,n,r,i,s,o,u,c);while(C(h-a)>p)l/=2,c+=(h<a?1:-1)*l,h=Lt(e,t,n,r,i,s,o,u,c);return c}function Ot(e,t,n,r,i,s,o,u){if(T(e,n)<N(i,o)||N(e,n)>T(i,o)||T(t,r)<N(s,u)||N(t,r)>T(s,u))return;var a=(e*r-t*n)*(i-o)-(e-n)*(i*u-s*o),f=(e*r-t*n)*(s-u)-(t-r)*(i*u-s*o),l=(e-n)*(s-u)-(t-r)*(i-o);if(!l)return;var c=a/l,h=f/l,p=+c.toFixed(2),d=+h.toFixed(2);if(p<+N(e,n).toFixed(2)||p>+T(e,n).toFixed(2)||p<+N(i,o).toFixed(2)||p>+T(i,o).toFixed(2)||d<+N(t,r).toFixed(2)||d>+T(t,r).toFixed(2)||d<+N(s,u).toFixed(2)||d>+T(s,u).toFixed(2))return;return{x:c,y:h}}function Mt(e,t){return Dt(e,t)}function _t(e,t){return Dt(e,t,1)}function Dt(e,n,r){var i=t.bezierBBox(e),s=t.bezierBBox(n);if(!t.isBBoxIntersect(i,s))return r?0:[];var o=Lt.apply(0,e),u=Lt.apply(0,n),a=~~(o/5),f=~~(u/5),l=[],c=[],h={},p=r?0:[];for(var d=0;d<a+1;d++){var v=t.findDotsAtSegment.apply(t,e.concat(d/a));l.push({x:v.x,y:v.y,t:d/a})}for(d=0;d<f+1;d++)v=t.findDotsAtSegment.apply(t,n.concat(d/f)),c.push({x:v.x,y:v.y,t:d/f});for(d=0;d<a;d++)for(var m=0;m<f;m++){var g=l[d],y=l[d+1],b=c[m],w=c[m+1],E=C(y.x-g.x)<.001?"y":"x",S=C(w.x-b.x)<.001?"y":"x",x=Ot(g.x,g.y,y.x,y.y,b.x,b.y,w.x,w.y);if(x){if(h[x.x.toFixed(4)]==x.y.toFixed(4))continue;h[x.x.toFixed(4)]=x.y.toFixed(4);var T=g.t+C((x[E]-g[E])/(y[E]-g[E]))*(y.t-g.t),N=b.t+C((x[S]-b[S])/(w[S]-b[S]))*(w.t-b.t);T>=0&&T<=1&&N>=0&&N<=1&&(r?p++:p.push({x:x.x,y:x.y,t1:T,t2:N}))}}return p}function Pt(e,n,r){e=t._path2curve(e),n=t._path2curve(n);var i,s,o,u,a,f,l,c,h,p,d=r?0:[];for(var v=0,m=e.length;v<m;v++){var g=e[v];if(g[0]=="M")i=a=g[1],s=f=g[2];else{g[0]=="C"?(h=[i,s].concat(g.slice(1)),i=h[6],s=h[7]):(h=[i,s,i,s,a,f,a,f],i=a,s=f);for(var y=0,b=n.length;y<b;y++){var w=n[y];if(w[0]=="M")o=l=w[1],u=c=w[2];else{w[0]=="C"?(p=[o,u].concat(w.slice(1)),o=p[6],u=p[7]):(p=[o,u,o,u,l,c,l,c],o=l,u=c);var E=Dt(h,p,r);if(r)d+=E;else{for(var S=0,x=E.length;S<x;S++)E[S].segment1=v,E[S].segment2=y,E[S].bez1=h,E[S].bez2=p;d=d.concat(E)}}}}}return d}function nn(e,t,n,r,i,s){e!=null?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function gn(){return this.x+g+this.y}function yn(){return this.x+g+this.y+g+this.width+" × "+this.height}function On(e,t,n,r,i,s){function h(e){return((a*e+u)*e+o)*e}function p(e,t){var n=d(e,t);return((c*n+l)*n+f)*n}function d(e,t){var n,r,i,s,f,l;for(i=e,l=0;l<8;l++){s=h(i)-e;if(C(s)<t)return i;f=(3*a*i+2*u)*i+o;if(C(f)<1e-6)break;i-=s/f}n=0,r=1,i=e;if(i<n)return n;if(i>r)return r;while(n<r){s=h(i);if(C(s-e)<t)return i;e>s?n=i:r=i,i=(r-n)/2+n}return i}var o=3*t,u=3*(r-t)-o,a=1-o-u,f=3*n,l=3*(i-n)-f,c=1-f-l;return p(e,1/(200*s))}function Mn(e,t){var n=[],r={};this.ms=t,this.times=1;if(e){for(var i in e)e[u](i)&&(r[z(i)]=e[i],n.push(z(i)));n.sort(it)}this.anim=r,this.top=n[n.length-1],this.percents=n}function _n(n,i,s,o,a,f){s=z(s);var l,c,h,p=[],v,m,g,w=n.ms,E={},S={},x={};if(o)for(N=0,C=Cn.length;N<C;N++){var T=Cn[N];if(T.el.id==i.id&&T.anim==n){T.percent!=s?(Cn.splice(N,1),h=1):c=T,i.attr(T.totalOrigin);break}}else o=+S;for(var N=0,C=n.percents.length;N<C;N++){if(n.percents[N]==s||n.percents[N]>o*n.top){s=n.percents[N],m=n.percents[N-1]||0,w=w/n.top*(s-m),v=n.percents[N+1],l=n.anim[s];break}o&&i.attr(n.anim[n.percents[N]])}if(!l)return;if(!c){for(var k in l)if(l[u](k))if($[u](k)||i.paper.customAttributes[u](k)){E[k]=i.attr(k),E[k]==null&&(E[k]=V[k]),S[k]=l[k];switch($[k]){case A:x[k]=(S[k]-E[k])/w;break;case"colour":E[k]=t.getRGB(E[k]);var L=t.getRGB(S[k]);x[k]={r:(L.r-E[k].r)/w,g:(L.g-E[k].g)/w,b:(L.b-E[k].b)/w};break;case"path":var O=Wt(E[k],S[k]),M=O[1];E[k]=O[0],x[k]=[];for(N=0,C=E[k].length;N<C;N++){x[k][N]=[0];for(var _=1,D=E[k][N].length;_<D;_++)x[k][N][_]=(M[N][_]-E[k][N][_])/w}break;case"transform":var P=i._,H=tn(P[k],S[k]);if(H){E[k]=H.from,S[k]=H.to,x[k]=[],x[k].real=!0;for(N=0,C=E[k].length;N<C;N++){x[k][N]=[E[k][N][0]];for(_=1,D=E[k][N].length;_<D;_++)x[k][N][_]=(S[k][N][_]-E[k][N][_])/w}}else{var B=i.matrix||new nn,j={_:{transform:P.transform},getBBox:function(){return i.getBBox(1)}};E[k]=[B.a,B.b,B.c,B.d,B.e,B.f],Zt(j,S[k]),S[k]=j._.transform,x[k]=[(j.matrix.a-B.a)/w,(j.matrix.b-B.b)/w,(j.matrix.c-B.c)/w,(j.matrix.d-B.d)/w,(j.matrix.e-B.e)/w,(j.matrix.f-B.f)/w]}break;case"csv":var F=y(l[k])[b](r),I=y(E[k])[b](r);if(k=="clip-rect"){E[k]=I,x[k]=[],N=I.length;while(N--)x[k][N]=(F[N]-E[k][N])/w}S[k]=F;break;default:F=[][d](l[k]),I=[][d](E[k]),x[k]=[],N=i.paper.customAttributes[k].length;while(N--)x[k][N]=((F[N]||0)-(I[N]||0))/w}}var R=l.easing,U=t.easing_formulas[R];if(!U){U=y(R).match(q);if(U&&U.length==5){var W=U;U=function(e){return On(e,+W[1],+W[2],+W[3],+W[4],w)}}else U=ot}g=l.start||n.start||+(new Date),T={anim:n,percent:s,timestamp:g,start:g+(n.del||0),status:0,initstatus:o||0,stop:!1,ms:w,easing:U,from:E,diff:x,to:S,el:i,callback:l.callback,prev:m,next:v,repeat:f||n.times,origin:i.attr(),totalOrigin:a},Cn.push(T);if(o&&!c&&!h){T.stop=!0,T.start=new Date-w*o;if(Cn.length==1)return Ln()}h&&(T.start=new Date-T.ms*o),Cn.length==1&&kn(Ln)}else c.initstatus=o,c.start=new Date-c.ms*o;e("raphael.anim.start."+i.id,i,n)}function Dn(e){for(var t=0;t<Cn.length;t++)Cn[t].el.paper==e&&Cn.splice(t--,1)}t.version="2.1.0",t.eve=e;var n,r=/[, ]+/,i={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},s=/\{(\d+)\}/g,o="prototype",u="hasOwnProperty",a={doc:document,win:window},f={was:Object.prototype[u].call(a.win,"Raphael"),is:a.win.Raphael},l=function(){this.ca=this.customAttributes={}},c,h="appendChild",p="apply",d="concat",v="createTouch"in a.doc,m="",g=" ",y=String,b="split",w="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[b](g),E={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},S=y.prototype.toLowerCase,x=Math,T=x.max,N=x.min,C=x.abs,k=x.pow,L=x.PI,A="number",O="string",M="array",_="toString",D="fill",P=Object.prototype.toString,H={},B="push",j=t._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,I={NaN:1,Infinity:1,"-Infinity":1},q=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,R=x.round,U="setAttribute",z=parseFloat,W=parseInt,X=y.prototype.toUpperCase,V=t._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},$=t._availableAnimAttrs={blur:A,"clip-rect":"csv",cx:A,cy:A,fill:"colour","fill-opacity":A,"font-size":A,height:A,opacity:A,path:"path",r:A,rx:A,ry:A,stroke:"colour","stroke-opacity":A,"stroke-width":A,transform:"transform",width:A,x:A,y:A},J=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,K=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,Q={hs:1,rg:1},G=/,?([achlmqrstvxz]),?/gi,Y=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,Z=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,et=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,tt=t._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,nt={},rt=function(e,t){return e.key-t.key},it=function(e,t){return z(e)-z(t)},st=function(){},ot=function(e){return e},ut=t._rectPath=function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-i*2,0],["a",i,i,0,0,1,i,i],["l",0,r-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-n,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},at=function(e,t,n,r){return r==null&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},ft=t._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return at(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return at(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return ut(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return ut(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return ut(t.x,t.y,t.width,t.height)}},lt=t.mapPath=function(e,t){if(!t)return e;var n,r,i,s,o,u,a;e=Wt(e);for(i=0,o=e.length;i<o;i++){a=e[i];for(s=1,u=a.length;s<u;s+=2)n=t.x(a[s],a[s+1]),r=t.y(a[s],a[s+1]),a[s]=n,a[s+1]=r}return e};t._g=a,t.type=a.win.SVGAngle||a.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(t.type=="VML"){var ct=a.doc.createElement("div"),ht;ct.innerHTML='<v:shape adj="1"/>',ht=ct.firstChild,ht.style.behavior="url(#default#VML)";if(!ht||typeof ht.adj!="object")return t.type=m;ct=null}t.svg=!(t.vml=t.type=="VML"),t._Paper=l,t.fn=c=l.prototype=t.prototype,t._id=0,t._oid=0,t.is=function(e,t){return t=S.call(t),t=="finite"?!I[u](+e):t=="array"?e instanceof Array:t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||t=="array"&&Array.isArray&&Array.isArray(e)||P.call(e).slice(8,-1).toLowerCase()==t},t.angle=function(e,n,r,i,s,o){if(s==null){var u=e-r,a=n-i;return!u&&!a?0:(180+x.atan2(-a,-u)*180/L+360)%360}return t.angle(e,n,s,o)-t.angle(r,i,s,o)},t.rad=function(e){return e%360*L/180},t.deg=function(e){return e*180/L%360},t.snapTo=function(e,n,r){r=t.is(r,"finite")?r:10;if(t.is(e,M)){var i=e.length;while(i--)if(C(e[i]-n)<=r)return e[i]}else{e=+e;var s=n%e;if(s<r)return n-s;if(s>e-r)return n-s+e}return n};var dt=t.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=x.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)});t.setWindow=function(n){e("raphael.setWindow",t,a.win,n),a.win=n,a.doc=a.win.document,t._engine.initWin&&t._engine.initWin(a.win)};var vt=function(e){if(t.vml){var n=/^\s+|\s+$/g,r;try{var i=new ActiveXObject("htmlfile");i.write("<body>"),i.close(),r=i.body}catch(s){r=createPopup().document.body}var o=r.createTextRange();vt=St(function(e){try{r.style.color=y(e).replace(n,m);var t=o.queryCommandValue("ForeColor");return t=(t&255)<<16|t&65280|(t&16711680)>>>16,"#"+("000000"+t.toString(16)).slice(-6)}catch(i){return"none"}})}else{var u=a.doc.createElement("i");u.title="Raphaël Colour Picker",u.style.display="none",a.doc.body.appendChild(u),vt=St(function(e){return u.style.color=e,a.doc.defaultView.getComputedStyle(u,m).getPropertyValue("color")})}return vt(e)},mt=function(){return"hsb("+[this.h,this.s,this.b]+")"},gt=function(){return"hsl("+[this.h,this.s,this.l]+")"},yt=function(){return this.hex},bt=function(e,n,r){n==null&&t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,n=e.g,e=e.r);if(n==null&&t.is(e,O)){var i=t.getRGB(e);e=i.r,n=i.g,r=i.b}if(e>1||n>1||r>1)e/=255,n/=255,r/=255;return[e,n,r]},wt=function(e,n,r,i){e*=255,n*=255,r*=255;var s={r:e,g:n,b:r,hex:t.rgb(e,n,r),toString:yt};return t.is(i,"finite")&&(s.opacity=i),s};t.color=function(e){var n;return t.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(n=t.hsb2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):t.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(n=t.hsl2rgb(e),e.r=n.r,e.g=n.g,e.b=n.b,e.hex=n.hex):(t.is(e,"string")&&(e=t.getRGB(e)),t.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(n=t.rgb2hsl(e),e.h=n.h,e.s=n.s,e.l=n.l,n=t.rgb2hsb(e),e.v=n.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1)),e.toString=yt,e},t.hsb2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,e=e.h,r=e.o),e*=360;var i,s,o,u,a;return e=e%360/60,a=n*t,u=a*(1-C(e%2-1)),i=s=o=n-a,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],wt(i,s,o,r)},t.hsl2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h);if(e>1||t>1||n>1)e/=360,t/=100,n/=100;e*=360;var i,s,o,u,a;return e=e%360/60,a=2*t*(n<.5?n:1-n),u=a*(1-C(e%2-1)),i=s=o=n-a/2,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],wt(i,s,o,r)},t.rgb2hsb=function(e,t,n){n=bt(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o;return s=T(e,t,n),o=s-N(e,t,n),r=o==0?null:s==e?(t-n)/o:s==t?(n-e)/o+2:(e-t)/o+4,r=(r+360)%6*60/360,i=o==0?0:o/s,{h:r,s:i,b:s,toString:mt}},t.rgb2hsl=function(e,t,n){n=bt(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o,u,a;return o=T(e,t,n),u=N(e,t,n),a=o-u,r=a==0?null:o==e?(t-n)/a:o==t?(n-e)/a+2:(e-t)/a+4,r=(r+360)%6*60/360,s=(o+u)/2,i=a==0?0:s<.5?a/(2*s):a/(2-2*s),{h:r,s:i,l:s,toString:gt}},t._path2string=function(){return this.join(",").replace(G,"$1")};var xt=t._preload=function(e,t){var n=a.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,a.doc.body.removeChild(this)},n.onerror=function(){a.doc.body.removeChild(this)},a.doc.body.appendChild(n),n.src=e};t.getRGB=St(function(e){if(!e||!!((e=y(e)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Tt};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:Tt};!Q[u](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=vt(e));var n,r,i,s,o,a,f,l=e.match(F);return l?(l[2]&&(s=W(l[2].substring(5),16),i=W(l[2].substring(3,5),16),r=W(l[2].substring(1,3),16)),l[3]&&(s=W((a=l[3].charAt(3))+a,16),i=W((a=l[3].charAt(2))+a,16),r=W((a=l[3].charAt(1))+a,16)),l[4]&&(f=l[4][b](K),r=z(f[0]),f[0].slice(-1)=="%"&&(r*=2.55),i=z(f[1]),f[1].slice(-1)=="%"&&(i*=2.55),s=z(f[2]),f[2].slice(-1)=="%"&&(s*=2.55),l[1].toLowerCase().slice(0,4)=="rgba"&&(o=z(f[3])),f[3]&&f[3].slice(-1)=="%"&&(o/=100)),l[5]?(f=l[5][b](K),r=z(f[0]),f[0].slice(-1)=="%"&&(r*=2.55),i=z(f[1]),f[1].slice(-1)=="%"&&(i*=2.55),s=z(f[2]),f[2].slice(-1)=="%"&&(s*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="°")&&(r/=360),l[1].toLowerCase().slice(0,4)=="hsba"&&(o=z(f[3])),f[3]&&f[3].slice(-1)=="%"&&(o/=100),t.hsb2rgb(r,i,s,o)):l[6]?(f=l[6][b](K),r=z(f[0]),f[0].slice(-1)=="%"&&(r*=2.55),i=z(f[1]),f[1].slice(-1)=="%"&&(i*=2.55),s=z(f[2]),f[2].slice(-1)=="%"&&(s*=2.55),(f[0].slice(-3)=="deg"||f[0].slice(-1)=="°")&&(r/=360),l[1].toLowerCase().slice(0,4)=="hsla"&&(o=z(f[3])),f[3]&&f[3].slice(-1)=="%"&&(o/=100),t.hsl2rgb(r,i,s,o)):(l={r:r,g:i,b:s,toString:Tt},l.hex="#"+(16777216|s|i<<8|r<<16).toString(16).slice(1),t.is(o,"finite")&&(l.opacity=o),l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:Tt}},t),t.hsb=St(function(e,n,r){return t.hsb2rgb(e,n,r).hex}),t.hsl=St(function(e,n,r){return t.hsl2rgb(e,n,r).hex}),t.rgb=St(function(e,t,n){return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)}),t.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},t.getColor.reset=function(){delete this.start},t.parsePathString=function(e){if(!e)return null;var n=Ct(e);if(n.arr)return Bt(n.arr);var r={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},i=[];return t.is(e,M)&&t.is(e[0],M)&&(i=Bt(e)),i.length||y(e).replace(Y,function(e,t,n){var s=[],o=t.toLowerCase();n.replace(et,function(e,t){t&&s.push(+t)}),o=="m"&&s.length>2&&(i.push([t][d](s.splice(0,2))),o="l",t=t=="m"?"l":"L");if(o=="r")i.push([t][d](s));else while(s.length>=r[o]){i.push([t][d](s.splice(0,r[o])));if(!r[o])break}}),i.toString=t._path2string,n.arr=Bt(i),i},t.parseTransformString=St(function(e){if(!e)return null;var n={r:3,s:4,t:2,m:6},r=[];return t.is(e,M)&&t.is(e[0],M)&&(r=Bt(e)),r.length||y(e).replace(Z,function(e,t,n){var i=[],s=S.call(t);n.replace(et,function(e,t){t&&i.push(+t)}),r.push([t][d](i))}),r.toString=t._path2string,r});var Ct=function(e){var t=Ct.ps=Ct.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[u](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]};t.findDotsAtSegment=function(e,t,n,r,i,s,o,u,a){var f=1-a,l=k(f,3),c=k(f,2),h=a*a,p=h*a,d=l*e+c*3*a*n+f*3*a*a*i+p*o,v=l*t+c*3*a*r+f*3*a*a*s+p*u,m=e+2*a*(n-e)+h*(i-2*n+e),g=t+2*a*(r-t)+h*(s-2*r+t),y=n+2*a*(i-n)+h*(o-2*i+n),b=r+2*a*(s-r)+h*(u-2*s+r),w=f*e+a*n,E=f*t+a*r,S=f*i+a*o,T=f*s+a*u,N=90-x.atan2(m-y,g-b)*180/L;return(m>y||g<b)&&(N+=180),{x:d,y:v,m:{x:m,y:g},n:{x:y,y:b},start:{x:w,y:E},end:{x:S,y:T},alpha:N}},t.bezierBBox=function(e,n,r,i,s,o,u,a){t.is(e,"array")||(e=[e,n,r,i,s,o,u,a]);var f=zt.apply(null,e);return{x:f.min.x,y:f.min.y,x2:f.max.x,y2:f.max.y,width:f.max.x-f.min.x,height:f.max.y-f.min.y}},t.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},t.isBBoxIntersect=function(e,n){var r=t.isPointInsideBBox;return r(n,e.x,e.y)||r(n,e.x2,e.y)||r(n,e.x,e.y2)||r(n,e.x2,e.y2)||r(e,n.x,n.y)||r(e,n.x2,n.y)||r(e,n.x,n.y2)||r(e,n.x2,n.y2)||(e.x<n.x2&&e.x>n.x||n.x<e.x2&&n.x>e.x)&&(e.y<n.y2&&e.y>n.y||n.y<e.y2&&n.y>e.y)},t.pathIntersection=function(e,t){return Pt(e,t)},t.pathIntersectionNumber=function(e,t){return Pt(e,t,1)},t.isPointInsidePath=function(e,n,r){var i=t.pathBBox(e);return t.isPointInsideBBox(i,n,r)&&Pt(e,[["M",n,r],["H",i.x2+10]],1)%2==1},t._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var Ht=t.pathBBox=function(e){var t=Ct(e);if(t.bbox)return t.bbox;if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=Wt(e);var n=0,r=0,i=[],s=[],o;for(var u=0,a=e.length;u<a;u++){o=e[u];if(o[0]=="M")n=o[1],r=o[2],i.push(n),s.push(r);else{var f=zt(n,r,o[1],o[2],o[3],o[4],o[5],o[6]);i=i[d](f.min.x,f.max.x),s=s[d](f.min.y,f.max.y),n=o[5],r=o[6]}}var l=N[p](0,i),c=N[p](0,s),h=T[p](0,i),v=T[p](0,s),m={x:l,y:c,x2:h,y2:v,width:h-l,height:v-c};return t.bbox=pt(m),m},Bt=function(e){var n=pt(e);return n.toString=t._path2string,n},jt=t._pathToRelative=function(e){var n=Ct(e);if(n.rel)return Bt(n.rel);if(!t.is(e,M)||!t.is(e&&e[0],M))e=t.parsePathString(e);var r=[],i=0,s=0,o=0,u=0,a=0;e[0][0]=="M"&&(i=e[0][1],s=e[0][2],o=i,u=s,a++,r.push(["M",i,s]));for(var f=a,l=e.length;f<l;f++){var c=r[f]=[],h=e[f];if(h[0]!=S.call(h[0])){c[0]=S.call(h[0]);switch(c[0]){case"a":c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=+(h[6]-i).toFixed(3),c[7]=+(h[7]-s).toFixed(3);break;case"v":c[1]=+(h[1]-s).toFixed(3);break;case"m":o=h[1],u=h[2];default:for(var p=1,d=h.length;p<d;p++)c[p]=+(h[p]-(p%2?i:s)).toFixed(3)}}else{c=r[f]=[],h[0]=="m"&&(o=h[1]+i,u=h[2]+s);for(var v=0,m=h.length;v<m;v++)r[f][v]=h[v]}var g=r[f].length;switch(r[f][0]){case"z":i=o,s=u;break;case"h":i+=+r[f][g-1];break;case"v":s+=+r[f][g-1];break;default:i+=+r[f][g-2],s+=+r[f][g-1]}}return r.toString=t._path2string,n.rel=Bt(r),r},Ft=t._pathToAbsolute=function(e){var n=Ct(e);if(n.abs)return Bt(n.abs);if(!t.is(e,M)||!t.is(e&&e[0],M))e=t.parsePathString(e);if(!e||!e.length)return[["M",0,0]];var r=[],i=0,s=0,o=0,u=0,a=0;e[0][0]=="M"&&(i=+e[0][1],s=+e[0][2],o=i,u=s,a++,r[0]=["M",i,s]);var f=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z";for(var l,c,h=a,p=e.length;h<p;h++){r.push(l=[]),c=e[h];if(c[0]!=X.call(c[0])){l[0]=X.call(c[0]);switch(l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+(c[6]+i),l[7]=+(c[7]+s);break;case"V":l[1]=+c[1]+s;break;case"H":l[1]=+c[1]+i;break;case"R":var v=[i,s][d](c.slice(1));for(var m=2,g=v.length;m<g;m++)v[m]=+v[m]+i,v[++m]=+v[m]+s;r.pop(),r=r[d](Nt(v,f));break;case"M":o=+c[1]+i,u=+c[2]+s;default:for(m=1,g=c.length;m<g;m++)l[m]=+c[m]+(m%2?i:s)}}else if(c[0]=="R")v=[i,s][d](c.slice(1)),r.pop(),r=r[d](Nt(v,f)),l=["R"][d](c.slice(-2));else for(var y=0,b=c.length;y<b;y++)l[y]=c[y];switch(l[0]){case"Z":i=o,s=u;break;case"H":i=l[1];break;case"V":s=l[1];break;case"M":o=l[l.length-2],u=l[l.length-1];default:i=l[l.length-2],s=l[l.length-1]}}return r.toString=t._path2string,n.abs=Bt(r),r},It=function(e,t,n,r){return[e,t,n,r,n,r]},qt=function(e,t,n,r,i,s){var o=1/3,u=2/3;return[o*e+u*n,o*t+u*r,o*i+u*n,o*s+u*r,i,s]},Rt=function(e,t,n,r,i,s,o,u,a,f){var l=L*120/180,c=L/180*(+i||0),h=[],p,v=St(function(e,t,n){var r=e*x.cos(n)-t*x.sin(n),i=e*x.sin(n)+t*x.cos(n);return{x:r,y:i}});if(!f){p=v(e,t,-c),e=p.x,t=p.y,p=v(u,a,-c),u=p.x,a=p.y;var m=x.cos(L/180*i),g=x.sin(L/180*i),y=(e-u)/2,w=(t-a)/2,E=y*y/(n*n)+w*w/(r*r);E>1&&(E=x.sqrt(E),n=E*n,r=E*r);var S=n*n,T=r*r,N=(s==o?-1:1)*x.sqrt(C((S*T-S*w*w-T*y*y)/(S*w*w+T*y*y))),k=N*n*w/r+(e+u)/2,A=N*-r*y/n+(t+a)/2,O=x.asin(((t-A)/r).toFixed(9)),M=x.asin(((a-A)/r).toFixed(9));O=e<k?L-O:O,M=u<k?L-M:M,O<0&&(O=L*2+O),M<0&&(M=L*2+M),o&&O>M&&(O-=L*2),!o&&M>O&&(M-=L*2)}else O=f[0],M=f[1],k=f[2],A=f[3];var _=M-O;if(C(_)>l){var D=M,P=u,H=a;M=O+l*(o&&M>O?1:-1),u=k+n*x.cos(M),a=A+r*x.sin(M),h=Rt(u,a,n,r,i,0,o,P,H,[M,D,k,A])}_=M-O;var B=x.cos(O),j=x.sin(O),F=x.cos(M),I=x.sin(M),q=x.tan(_/4),R=4/3*n*q,U=4/3*r*q,z=[e,t],W=[e+R*j,t-U*B],X=[u+R*I,a-U*F],V=[u,a];W[0]=2*z[0]-W[0],W[1]=2*z[1]-W[1];if(f)return[W,X,V][d](h);h=[W,X,V][d](h).join()[b](",");var $=[];for(var J=0,K=h.length;J<K;J++)$[J]=J%2?v(h[J-1],h[J],c).y:v(h[J],h[J+1],c).x;return $},Ut=function(e,t,n,r,i,s,o,u,a){var f=1-a;return{x:k(f,3)*e+k(f,2)*3*a*n+f*3*a*a*i+k(a,3)*o,y:k(f,3)*t+k(f,2)*3*a*r+f*3*a*a*s+k(a,3)*u}},zt=St(function(e,t,n,r,i,s,o,u){var a=i-2*n+e-(o-2*i+n),f=2*(n-e)-2*(i-n),l=e-n,c=(-f+x.sqrt(f*f-4*a*l))/2/a,h=(-f-x.sqrt(f*f-4*a*l))/2/a,d=[t,u],v=[e,o],m;return C(c)>"1e12"&&(c=.5),C(h)>"1e12"&&(h=.5),c>0&&c<1&&(m=Ut(e,t,n,r,i,s,o,u,c),v.push(m.x),d.push(m.y)),h>0&&h<1&&(m=Ut(e,t,n,r,i,s,o,u,h),v.push(m.x),d.push(m.y)),a=s-2*r+t-(u-2*s+r),f=2*(r-t)-2*(s-r),l=t-r,c=(-f+x.sqrt(f*f-4*a*l))/2/a,h=(-f-x.sqrt(f*f-4*a*l))/2/a,C(c)>"1e12"&&(c=.5),C(h)>"1e12"&&(h=.5),c>0&&c<1&&(m=Ut(e,t,n,r,i,s,o,u,c),v.push(m.x),d.push(m.y)),h>0&&h<1&&(m=Ut(e,t,n,r,i,s,o,u,h),v.push(m.x),d.push(m.y)),{min:{x:N[p](0,v),y:N[p](0,d)},max:{x:T[p](0,v),y:T[p](0,d)}}}),Wt=t._path2curve=St(function(e,t){var n=!t&&Ct(e);if(!t&&n.curve)return Bt(n.curve);var r=Ft(e),i=t&&Ft(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=function(e,t){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null);switch(e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][d](Rt[p](0,[t.x,t.y][d](e.slice(1))));break;case"S":n=t.x+(t.x-(t.bx||t.x)),r=t.y+(t.y-(t.by||t.y)),e=["C",n,r][d](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][d](qt(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][d](qt(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][d](It(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][d](It(t.x,t.y,e[1],t.y));break;case"V":e=["C"][d](It(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][d](It(t.x,t.y,t.X,t.Y))}return e},a=function(e,t){if(e[t].length>7){e[t].shift();var n=e[t];while(n.length)e.splice(t++,0,["C"][d](n.splice(0,6)));e.splice(t,1),c=T(r.length,i&&i.length||0)}},f=function(e,t,n,s,o){e&&t&&e[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",s.x,s.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],c=T(r.length,i&&i.length||0))};for(var l=0,c=T(r.length,i&&i.length||0);l<c;l++){r[l]=u(r[l],s),a(r,l),i&&(i[l]=u(i[l],o)),i&&a(i,l),f(r,i,s,o,l),f(i,r,o,s,l);var h=r[l],v=i&&i[l],m=h.length,g=i&&v.length;s.x=h[m-2],s.y=h[m-1],s.bx=z(h[m-4])||s.x,s.by=z(h[m-3])||s.y,o.bx=i&&(z(v[g-4])||o.x),o.by=i&&(z(v[g-3])||o.y),o.x=i&&v[g-2],o.y=i&&v[g-1]}return i||(n.curve=Bt(r)),i?[r,i]:r},null,Bt),Xt=t._parseDots=St(function(e){var n=[];for(var r=0,i=e.length;r<i;r++){var s={},o=e[r].match(/^([^:]*):?([\d\.]*)/);s.color=t.getRGB(o[1]);if(s.color.error)return null;s.color=s.color.hex,o[2]&&(s.offset=o[2]+"%"),n.push(s)}for(r=1,i=n.length-1;r<i;r++)if(!n[r].offset){var u=z(n[r-1].offset||0),a=0;for(var f=r+1;f<i;f++)if(n[f].offset){a=n[f].offset;break}a||(a=100,f=i),a=z(a);var l=(a-u)/(f-r+1);for(;r<f;r++)u+=l,n[r].offset=u+"%"}return n}),Vt=t._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},$t=t._tofront=function(e,t){if(t.top===e)return;Vt(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e},Jt=t._toback=function(e,t){if(t.bottom===e)return;Vt(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e},Kt=t._insertafter=function(e,t,n){Vt(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},Qt=t._insertbefore=function(e,t,n){Vt(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},Gt=t.toMatrix=function(e,t){var n=Ht(e),r={_:{transform:m},getBBox:function(){return n}};return Zt(r,t),r.matrix},Yt=t.transformPath=function(e,t){return lt(e,Gt(e,t))},Zt=t._extractTransform=function(e,n){if(n==null)return e._.transform;n=y(n).replace(/\.{3}|\u2026/g,e._.transform||m);var r=t.parseTransformString(n),i=0,s=0,o=0,u=1,a=1,f=e._,l=new nn;f.transform=r||[];if(r)for(var c=0,h=r.length;c<h;c++){var p=r[c],d=p.length,v=y(p[0]).toLowerCase(),g=p[0]!=v,b=g?l.invert():0,w,E,S,x,T;v=="t"&&d==3?g?(w=b.x(0,0),E=b.y(0,0),S=b.x(p[1],p[2]),x=b.y(p[1],p[2]),l.translate(S-w,x-E)):l.translate(p[1],p[2]):v=="r"?d==2?(T=T||e.getBBox(1),l.rotate(p[1],T.x+T.width/2,T.y+T.height/2),i+=p[1]):d==4&&(g?(S=b.x(p[2],p[3]),x=b.y(p[2],p[3]),l.rotate(p[1],S,x)):l.rotate(p[1],p[2],p[3]),i+=p[1]):v=="s"?d==2||d==3?(T=T||e.getBBox(1),l.scale(p[1],p[d-1],T.x+T.width/2,T.y+T.height/2),u*=p[1],a*=p[d-1]):d==5&&(g?(S=b.x(p[3],p[4]),x=b.y(p[3],p[4]),l.scale(p[1],p[2],S,x)):l.scale(p[1],p[2],p[3],p[4]),u*=p[1],a*=p[2]):v=="m"&&d==7&&l.add(p[1],p[2],p[3],p[4],p[5],p[6]),f.dirtyT=1,e.matrix=l}e.matrix=l,f.sx=u,f.sy=a,f.deg=i,f.dx=s=l.e,f.dy=o=l.f,u==1&&a==1&&!i&&f.bbox?(f.bbox.x+=+s,f.bbox.y+=+o):f.dirtyT=1},en=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return e.length==4?[t,0,e[2],e[3]]:[t,0];case"s":return e.length==5?[t,1,1,e[3],e[4]]:e.length==3?[t,1,1]:[t,1]}},tn=t._equaliseTransform=function(e,n){n=y(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];var r=T(e.length,n.length),i=[],s=[],o=0,u,a,f,l;for(;o<r;o++){f=e[o]||en(n[o]),l=n[o]||en(f);if(f[0]!=l[0]||f[0].toLowerCase()=="r"&&(f[2]!=l[2]||f[3]!=l[3])||f[0].toLowerCase()=="s"&&(f[3]!=l[3]||f[4]!=l[4]))return;i[o]=[],s[o]=[];for(u=0,a=T(f.length,l.length);u<a;u++)u in f&&(i[o][u]=f[u]),u in l&&(s[o][u]=l[u])}return{from:i,to:s}};t._getContainer=function(e,n,r,i){var s;s=i==null&&!t.is(e,"object")?a.doc.getElementById(e):e;if(s==null)return;return s.tagName?n==null?{container:s,width:s.style.pixelWidth||s.offsetWidth,height:s.style.pixelHeight||s.offsetHeight}:{container:s,width:n,height:r}:{container:1,x:e,y:n,width:r,height:i}},t.pathToRelative=jt,t._engine={},t.path2curve=Wt,t.matrix=function(e,t,n,r,i,s){return new nn(e,t,n,r,i,s)},function(e){function n(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var t=x.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}e.add=function(e,t,n,r,i,s){var o=[[],[],[]],u=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],a=[[e,n,i],[t,r,s],[0,0,1]],f,l,c,h;e&&e instanceof nn&&(a=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]);for(f=0;f<3;f++)for(l=0;l<3;l++){h=0;for(c=0;c<3;c++)h+=u[f][c]*a[c][l];o[f][l]=h}this.a=o[0][0],this.b=o[1][0],this.c=o[0][1],this.d=o[1][1],this.e=o[0][2],this.f=o[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new nn(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new nn(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,n,r){t==null&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},e.rotate=function(e,n,r){e=t.rad(e),n=n||0,r=r||0;var i=+x.cos(e).toFixed(9),s=+x.sin(e).toFixed(9);this.add(i,s,-s,i,n,r),this.add(1,0,0,1,-n,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[y.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return t.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var i=[[this.a,this.c],[this.b,this.d]];e.scalex=x.sqrt(n(i[0])),r(i[0]),e.shear=i[0][0]*i[1][0]+i[0][1]*i[1][1],i[1]=[i[1][0]-i[0][0]*e.shear,i[1][1]-i[0][1]*e.shear],e.scaley=x.sqrt(n(i[1])),r(i[1]),e.shear/=e.scaley;var s=-i[0][1],o=i[1][1];return o<0?(e.rotate=t.deg(x.acos(o)),s<0&&(e.rotate=360-e.rotate)):e.rotate=t.deg(x.asin(s)),e.isSimple=!+e.shear.toFixed(9)&&(e.scalex.toFixed(9)==e.scaley.toFixed(9)||!e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[b]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:m)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:m)+(t.rotate?"r"+[t.rotate,0,0]:m)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(nn.prototype);var rn=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(rn&&rn[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&rn&&rn[1]<8?c.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()})}:c.safari=st;var sn=function(){this.returnValue=!1},on=function(){return this.originalEvent.preventDefault()},un=function(){this.cancelBubble=!0},an=function(){return this.originalEvent.stopPropagation()},fn=function(){if(a.doc.addEventListener)return function(e,t,n,r){var i=v&&E[t]?E[t]:t,s=function(i){var s=a.doc.documentElement.scrollTop||a.doc.body.scrollTop,o=a.doc.documentElement.scrollLeft||a.doc.body.scrollLeft,f=i.clientX+o,l=i.clientY+s;if(v&&E[u](t))for(var c=0,h=i.targetTouches&&i.targetTouches.length;c<h;c++)if(i.targetTouches[c].target==e){var p=i;i=i.targetTouches[c],i.originalEvent=p,i.preventDefault=on,i.stopPropagation=an;break}return n.call(r,i,f,l)};return e.addEventListener(i,s,!1),function(){return e.removeEventListener(i,s,!1),!0}};if(a.doc.attachEvent)return function(e,t,n,r){var i=function(e){e=e||a.win.event;var t=a.doc.documentElement.scrollTop||a.doc.body.scrollTop,i=a.doc.documentElement.scrollLeft||a.doc.body.scrollLeft,s=e.clientX+i,o=e.clientY+t;return e.preventDefault=e.preventDefault||sn,e.stopPropagation=e.stopPropagation||un,n.call(r,e,s,o)};e.attachEvent("on"+t,i);var s=function(){return e.detachEvent("on"+t,i),!0};return s}}(),ln=[],cn=function(t){var n=t.clientX,r=t.clientY,i=a.doc.documentElement.scrollTop||a.doc.body.scrollTop,s=a.doc.documentElement.scrollLeft||a.doc.body.scrollLeft,o,u=ln.length;while(u--){o=ln[u];if(v){var f=t.touches.length,l;while(f--){l=t.touches[f];if(l.identifier==o.el._drag.id){n=l.clientX,r=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}}else t.preventDefault();var c=o.el.node,h,p=c.nextSibling,d=c.parentNode,m=c.style.display;a.win.opera&&d.removeChild(c),c.style.display="none",h=o.el.paper.getElementByPoint(n,r),c.style.display=m,a.win.opera&&(p?d.insertBefore(c,p):d.appendChild(c)),h&&e("raphael.drag.over."+o.el.id,o.el,h),n+=s,r+=i,e("raphael.drag.move."+o.el.id,o.move_scope||o.el,n-o.el._drag.x,r-o.el._drag.y,n,r,t)}},hn=function(n){t.unmousemove(cn).unmouseup(hn);var r=ln.length,i;while(r--)i=ln[r],i.el._drag={},e("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,n);ln=[]},pn=t.el={};for(var dn=w.length;dn--;)(function(e){t[e]=pn[e]=function(n,r){return t.is(n,"function")&&(this.events=this.events||[],this.events.push({name:e,f:n,unbind:fn(this.shape||this.node||a.doc,e,n,r||this)})),this},t["un"+e]=pn["un"+e]=function(t){var n=this.events||[],r=n.length;while(r--)if(n[r].name==e&&n[r].f==t)return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}})(w[dn]);pn.data=function(n,r){var i=nt[this.id]=nt[this.id]||{};if(arguments.length==1){if(t.is(n,"object")){for(var s in n)n[u](s)&&this.data(s,n[s]);return this}return e("raphael.data.get."+this.id,this,i[n],n),i[n]}return i[n]=r,e("raphael.data.set."+this.id,this,r,n),this},pn.removeData=function(e){return e==null?nt[this.id]={}:nt[this.id]&&delete nt[this.id][e],this},pn.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},pn.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var vn=[];pn.drag=function(n,r,i,s,o,u){function f(f){(f.originalEvent||f).preventDefault();var l=a.doc.documentElement.scrollTop||a.doc.body.scrollTop,c=a.doc.documentElement.scrollLeft||a.doc.body.scrollLeft;this._drag.x=f.clientX+c,this._drag.y=f.clientY+l,this._drag.id=f.identifier,!ln.length&&t.mousemove(cn).mouseup(hn),ln.push({el:this,move_scope:s,start_scope:o,end_scope:u}),r&&e.on("raphael.drag.start."+this.id,r),n&&e.on("raphael.drag.move."+this.id,n),i&&e.on("raphael.drag.end."+this.id,i),e("raphael.drag.start."+this.id,o||s||this,f.clientX+c,f.clientY+l,f)}return this._drag={},vn.push({el:this,start:f}),this.mousedown(f),this},pn.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},pn.undrag=function(){var n=vn.length;while(n--)vn[n].el==this&&(this.unmousedown(vn[n].start),vn.splice(n,1),e.unbind("raphael.drag.*."+this.id));!vn.length&&t.unmousemove(cn).unmouseup(hn)},c.circle=function(e,n,r){var i=t._engine.circle(this,e||0,n||0,r||0);return this.__set__&&this.__set__.push(i),i},c.rect=function(e,n,r,i,s){var o=t._engine.rect(this,e||0,n||0,r||0,i||0,s||0);return this.__set__&&this.__set__.push(o),o},c.ellipse=function(e,n,r,i){var s=t._engine.ellipse(this,e||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(s),s},c.path=function(e){e&&!t.is(e,O)&&!t.is(e[0],M)&&(e+=m);var n=t._engine.path(t.format[p](t,arguments),this);return this.__set__&&this.__set__.push(n),n},c.image=function(e,n,r,i,s){var o=t._engine.image(this,e||"about:blank",n||0,r||0,i||0,s||0);return this.__set__&&this.__set__.push(o),o},c.text=function(e,n,r){var i=t._engine.text(this,e||0,n||0,y(r));return this.__set__&&this.__set__.push(i),i},c.set=function(e){!t.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var n=new Pn(e);return this.__set__&&this.__set__.push(n),n},c.setStart=function(e){this.__set__=e||this.set()},c.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},c.setSize=function(e,n){return t._engine.setSize.call(this,e,n)},c.setViewBox=function(e,n,r,i,s){return t._engine.setViewBox.call(this,e,n,r,i,s)},c.top=c.bottom=null,c.raphael=t;var mn=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,s=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,u=t.top+(a.win.pageYOffset||i.scrollTop||r.scrollTop)-s,f=t.left+(a.win.pageXOffset||i.scrollLeft||r.scrollLeft)-o;return{y:u,x:f}};c.getElementByPoint=function(e,t){var n=this,r=n.canvas,i=a.doc.elementFromPoint(e,t);if(a.win.opera&&i.tagName=="svg"){var s=mn(r),o=r.createSVGRect();o.x=e-s.x,o.y=t-s.y,o.width=o.height=1;var u=r.getIntersectionList(o,null);u.length&&(i=u[u.length-1])}if(!i)return null;while(i.parentNode&&i!=r.parentNode&&!i.raphael)i=i.parentNode;return i==n.canvas.parentNode&&(i=r),i=i&&i.raphael?n.getById(i.raphaelid):null,i},c.getById=function(e){var t=this.bottom;while(t){if(t.id==e)return t;t=t.next}return null},c.forEach=function(e,t){var n=this.bottom;while(n){if(e.call(t,n)===!1)return this;n=n.next}return this},c.getElementsByPoint=function(e,t){var n=this.set();return this.forEach(function(r){r.isPointInside(e,t)&&n.push(r)}),n},pn.isPointInside=function(e,n){var r=this.realPath=this.realPath||ft[this.type](this);return t.isPointInsidePath(r,e,n)},pn.getBBox=function(e){if(this.removed)return{};var t=this._;if(e){if(t.dirty||!t.bboxwt)this.realPath=ft[this.type](this),t.bboxwt=Ht(this.realPath),t.bboxwt.toString=yn,t.dirty=0;return t.bboxwt}if(t.dirty||t.dirtyT||!t.bbox){if(t.dirty||!this.realPath)t.bboxwt=0,this.realPath=ft[this.type](this);t.bbox=Ht(lt(this.realPath,this.matrix)),t.bbox.toString=yn,t.dirty=t.dirtyT=0}return t.bbox},pn.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},pn.glow=function(e){if(this.type=="text")return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,r=this.paper,i=r.set(),s=this.realPath||ft[this.type](this);s=this.matrix?lt(s,this.matrix):s;for(var o=1;o<n+1;o++)i.push(r.path(s).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*o).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(t.offsetx,t.offsety)};var bn={},wn=function(e,n,r,i,s,o,u,a,f){return f==null?Lt(e,n,r,i,s,o,u,a):t.findDotsAtSegment(e,n,r,i,s,o,u,a,At(e,n,r,i,s,o,u,a,f))},En=function(e,n){return function(r,i,s){r=Wt(r);var o,u,a,f,l="",c={},h,p=0;for(var d=0,v=r.length;d<v;d++){a=r[d];if(a[0]=="M")o=+a[1],u=+a[2];else{f=wn(o,u,a[1],a[2],a[3],a[4],a[5],a[6]);if(p+f>i){if(n&&!c.start){h=wn(o,u,a[1],a[2],a[3],a[4],a[5],a[6],i-p),l+=["C"+h.start.x,h.start.y,h.m.x,h.m.y,h.x,h.y];if(s)return l;c.start=l,l=["M"+h.x,h.y+"C"+h.n.x,h.n.y,h.end.x,h.end.y,a[5],a[6]].join(),p+=f,o=+a[5],u=+a[6];continue}if(!e&&!n)return h=wn(o,u,a[1],a[2],a[3],a[4],a[5],a[6],i-p),{x:h.x,y:h.y,alpha:h.alpha}}p+=f,o=+a[5],u=+a[6]}l+=a.shift()+a}return c.end=l,h=e?p:n?c:t.findDotsAtSegment(o,u,a[0],a[1],a[2],a[3],a[4],a[5],1),h.alpha&&(h={x:h.x,y:h.y,alpha:h.alpha}),h}},Sn=En(1),xn=En(),Tn=En(0,1);t.getTotalLength=Sn,t.getPointAtLength=xn,t.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return Tn(e,t).end;var r=Tn(e,n,1);return t?Tn(r,t).end:r},t.getPointPath=function(e){var t=[];e=Wt(e);var n,r,i,s,o="",u={},a,f=0;for(var l=0,c=e.length;l<c;l++){i=e[l];if(i[0]=="M")n=+i[1],r=+i[2];else{s=wn(n,r,i[1],i[2],i[3],i[4],i[5],i[6]);for(var h=0,p=s;h<p;h++)a=wn(n,r,i[1],i[2],i[3],i[4],i[5],i[6],h),t.push(a);f+=s,n=+i[5],r=+i[6]}o+=i.shift()+i}return{length:f,path:t}},pn.getTotalLength=function(){if(this.type!="path")return;return this.node.getTotalLength?this.node.getTotalLength():Sn(this.attrs.path)},pn.getPointAtLength=function(e){if(this.type!="path")return;return xn(this.attrs.path,e)},pn.getSubpath=function(e,n){if(this.type!="path")return;return t.getSubpath(this.attrs.path,e,n)};var Nn=t.easing_formulas={linear:function(e){return e},"<":function(e){return k(e,1.7)},">":function(e){return k(e,.48)},"<>":function(e){var t=.48-e/1.04,n=x.sqrt(.1734+t*t),r=n-t,i=k(C(r),1/3)*(r<0?-1:1),s=-n-t,o=k(C(s),1/3)*(s<0?-1:1),u=i+o+.5;return(1-u)*3*u*u+u*u*u},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:k(2,-10*e)*x.sin((e-.075)*2*L/.3)+1},bounce:function(e){var t=7.5625,n=2.75,r;return e<1/n?r=t*e*e:e<2/n?(e-=1.5/n,r=t*e*e+.75):e<2.5/n?(e-=2.25/n,r=t*e*e+.9375):(e-=2.625/n,r=t*e*e+.984375),r}};Nn.easeIn=Nn["ease-in"]=Nn["<"],Nn.easeOut=Nn["ease-out"]=Nn[">"],Nn.easeInOut=Nn["ease-in-out"]=Nn["<>"],Nn["back-in"]=Nn.backIn,Nn["back-out"]=Nn.backOut;var Cn=[],kn=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Ln=function(){var n=+(new Date),r=0;for(;r<Cn.length;r++){var i=Cn[r];if(i.el.removed||i.paused)continue;var s=n-i.start,o=i.ms,a=i.easing,f=i.from,l=i.diff,c=i.to,h=i.t,p=i.el,v={},m,y={},b;i.initstatus?(s=(i.initstatus*i.anim.top-i.prev)/(i.percent-i.prev)*o,i.status=i.initstatus,delete i.initstatus,i.stop&&Cn.splice(r--,1)):i.status=(i.prev+(i.percent-i.prev)*(s/o))/i.anim.top;if(s<0)continue;if(s<o){var w=a(s/o);for(var E in f)if(f[u](E)){switch($[E]){case A:m=+f[E]+w*o*l[E];break;case"colour":m="rgb("+[An(R(f[E].r+w*o*l[E].r)),An(R(f[E].g+w*o*l[E].g)),An(R(f[E].b+w*o*l[E].b))].join(",")+")";break;case"path":m=[];for(var S=0,x=f[E].length;S<x;S++){m[S]=[f[E][S][0]];for(var T=1,N=f[E][S].length;T<N;T++)m[S][T]=+f[E][S][T]+w*o*l[E][S][T];m[S]=m[S].join(g)}m=m.join(g);break;case"transform":if(l[E].real){m=[];for(S=0,x=f[E].length;S<x;S++){m[S]=[f[E][S][0]];for(T=1,N=f[E][S].length;T<N;T++)m[S][T]=f[E][S][T]+w*o*l[E][S][T]}}else{var C=function(e){return+f[E][e]+w*o*l[E][e]};m=[["m",C(0),C(1),C(2),C(3),C(4),C(5)]]}break;case"csv":if(E=="clip-rect"){m=[],S=4;while(S--)m[S]=+f[E][S]+w*o*l[E][S]}break;default:var k=[][d](f[E]);m=[],S=p.paper.customAttributes[E].length;while(S--)m[S]=+k[S]+w*o*l[E][S]}v[E]=m}p.attr(v),function(t,n,r){setTimeout(function(){e("raphael.anim.frame."+t,n,r)})}(p.id,p,i.anim)}else{(function(n,r,i){setTimeout(function(){e("raphael.anim.frame."+r.id,r,i),e("raphael.anim.finish."+r.id,r,i),t.is(n,"function")&&n.call(r)})})(i.callback,p,i.anim),p.attr(c),Cn.splice(r--,1);if(i.repeat>1&&!i.next){for(b in c)c[u](b)&&(y[b]=i.totalOrigin[b]);i.el.attr(y),_n(i.anim,i.el,i.anim.percents[0],null,i.totalOrigin,i.repeat-1)}i.next&&!i.stop&&_n(i.anim,i.el,i.next,null,i.totalOrigin,i.repeat)}}t.svg&&p&&p.paper&&p.paper.safari(),Cn.length&&kn(Ln)},An=function(e){return e>255?255:e<0?0:e};pn.animateWith=function(e,n,r,i,s,o){var u=this;if(u.removed)return o&&o.call(u),u;var a=r instanceof Mn?r:t.animation(r,i,s,o),f,l;_n(a,u,a.percents[0],null,u.attr());for(var c=0,h=Cn.length;c<h;c++)if(Cn[c].anim==n&&Cn[c].el==e){Cn[h-1].start=Cn[c].start;break}return u},pn.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},Mn.prototype.delay=function(e){var t=new Mn(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},Mn.prototype.repeat=function(e){var t=new Mn(this.anim,this.ms);return t.del=this.del,t.times=x.floor(T(e,0))||1,t},t.animation=function(e,n,r,i){if(e instanceof Mn)return e;if(t.is(r,"function")||!r)i=i||r||null,r=null;e=Object(e),n=+n||0;var s={},o,a;for(a in e)e[u](a)&&z(a)!=a&&z(a)+"%"!=a&&(o=!0,s[a]=e[a]);return o?(r&&(s.easing=r),i&&(s.callback=i),new Mn({100:s},n)):new Mn(e,n)},pn.animate=function(e,n,r,i){var s=this;if(s.removed)return i&&i.call(s),s;var o=e instanceof Mn?e:t.animation(e,n,r,i);return _n(o,s,o.percents[0],null,s.attr()),s},pn.setTime=function(e,t){return e&&t!=null&&this.status(e,N(t,e.ms)/e.ms),this},pn.status=function(e,t){var n=[],r=0,i,s;if(t!=null)return _n(e,this,-1,N(t,1)),this;i=Cn.length;for(;r<i;r++){s=Cn[r];if(s.el.id==this.id&&(!e||s.anim==e)){if(e)return s.status;n.push({anim:s.anim,status:s.status})}}return e?0:n},pn.pause=function(t){for(var n=0;n<Cn.length;n++)Cn[n].el.id==this.id&&(!t||Cn[n].anim==t)&&e("raphael.anim.pause."+this.id,this,Cn[n].anim)!==!1&&(Cn[n].paused=!0);return this},pn.resume=function(t){for(var n=0;n<Cn.length;n++)if(Cn[n].el.id==this.id&&(!t||Cn[n].anim==t)){var r=Cn[n];e("raphael.anim.resume."+this.id,this,r.anim)!==!1&&(delete r.paused,this.status(r.anim,r.status))}return this},pn.stop=function(t){for(var n=0;n<Cn.length;n++)Cn[n].el.id==this.id&&(!t||Cn[n].anim==t)&&e("raphael.anim.stop."+this.id,this,Cn[n].anim)!==!1&&Cn.splice(n--,1);return this},e.on("raphael.remove",Dn),e.on("raphael.clear",Dn),pn.toString=function(){return"Raphaël’s object"};var Pn=function(e){this.items=[],this.length=0,this.type="set";if(e)for(var t=0,n=e.length;t<n;t++)e[t]&&(e[t].constructor==pn.constructor||e[t].constructor==Pn)&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},Hn=Pn.prototype;Hn.push=function(){var e,t;for(var n=0,r=arguments.length;n<r;n++)e=arguments[n],e&&(e.constructor==pn.constructor||e.constructor==Pn)&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},Hn.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Hn.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(e.call(t,this.items[n],n)===!1)return this;return this};for(var Bn in pn)pn[u](Bn)&&(Hn[Bn]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e][p](n,t)})}}(Bn));return Hn.attr=function(e,n){if(e&&t.is(e,M)&&t.is(e[0],"object"))for(var r=0,i=e.length;r<i;r++)this.items[r].attr(e[r]);else for(var s=0,o=this.items.length;s<o;s++)this.items[s].attr(e,n);return this},Hn.clear=function(){while(this.length)this.pop()},Hn.splice=function(e,t,n){e=e<0?T(this.length+e,0):e,t=T(0,N(this.length-e,t));var r=[],i=[],s=[],o;for(o=2;o<arguments.length;o++)s.push(arguments[o]);for(o=0;o<t;o++)i.push(this[e+o]);for(;o<this.length-e;o++)r.push(this[e+o]);var u=s.length;for(o=0;o<u+r.length;o++)this.items[e+o]=this[e+o]=o<u?s[o]:r[o-u];o=this.items.length=this.length-=t-u;while(this[o])delete this[o++];return new Pn(i)},Hn.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0},Hn.animate=function(e,n,r,i){(t.is(r,"function")||!r)&&(i=r||null);var s=this.items.length,o=s,u,a=this,f;if(!s)return this;i&&(f=function(){!--s&&i.call(a)}),r=t.is(r,O)?r:f;var l=t.animation(e,n,r,f);u=this.items[--o].animate(l);while(o--)this.items[o]&&!this.items[o].removed&&this.items[o].animateWith(u,l,l);return this},Hn.insertAfter=function(e){var t=this.items.length;while(t--)this.items[t].insertAfter(e);return this},Hn.getBBox=function(){var e=[],t=[],n=[],r=[];for(var i=this.items.length;i--;)if(!this.items[i].removed){var s=this.items[i].getBBox();e.push(s.x),t.push(s.y),n.push(s.x+s.width),r.push(s.y+s.height)}return e=N[p](0,e),t=N[p](0,t),n=T[p](0,n),r=T[p](0,r),{x:e,y:t,x2:n,y2:r,width:n-e,height:r-t}},Hn.clone=function(e){e=new Pn;for(var t=0,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},Hn.toString=function(){return"Raphaël‘s set"},t.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[u](r)&&(t.face[r]=e.face[r]);this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t];if(!e.svg){t.face["units-per-em"]=W(e.face["units-per-em"],10);for(var i in e.glyphs)if(e.glyphs[u](i)){var s=e.glyphs[i];t.glyphs[i]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"};if(s.k)for(var o in s.k)s[u](o)&&(t.glyphs[i].k[o]=s.k[o])}}return e},c.getFont=function(e,n,r,i){i=i||"normal",r=r||"normal",n=+n||{normal:400,bold:700,lighter:300,bolder:800}[n]||400;if(!t.fonts)return;var s=t.fonts[e];if(!s){var o=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,m)+"(\\s|$)","i");for(var a in t.fonts)if(t.fonts[u](a)&&o.test(a)){s=t.fonts[a];break}}var f;if(s)for(var l=0,c=s.length;l<c;l++){f=s[l];if(f.face["font-weight"]==n&&(f.face["font-style"]==r||!f.face["font-style"])&&f.face["font-stretch"]==i)break}return f},c.print=function(e,n,i,s,o,u,a){u=u||"middle",a=T(N(a||0,1),-1);var f=y(i)[b](m),l=0,c=0,h=m,p;t.is(s,i)&&(s=this.getFont(s));if(s){p=(o||16)/s.face["units-per-em"];var d=s.face.bbox[b](r),v=+d[0],g=d[3]-d[1],w=0,E=+d[1]+(u=="baseline"?g+ +s.face.descent:g/2);for(var S=0,x=f.length;S<x;S++){if(f[S]=="\n")l=0,k=0,c=0,w+=g;else{var C=c&&s.glyphs[f[S-1]]||{},k=s.glyphs[f[S]];l+=c?(C.w||s.w)+(C.k&&C.k[f[S]]||0)+s.w*a:0,c=1}k&&k.d&&(h+=t.transformPath(k.d,["t",l*p,w*p,"s",p,p,v,E,"t",(e-v)/p,(n-E)/p]))}}return this.path(h).attr({fill:"#000",stroke:"none"})},c.add=function(e){if(t.is(e,"array")){var n=this.set(),r=0,s=e.length,o;for(;r<s;r++)o=e[r]||{},i[u](o.type)&&n.push(this[o.type]().attr(o))}return n},t.format=function(e,n){var r=t.is(n,M)?[0][d](n):arguments;return e&&t.is(e,O)&&r.length-1&&(e=e.replace(s,function(e,t){return r[++t]==null?m:r[t]})),e||m},t.fullfill=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;return n.replace(t,function(e,t,n,r,s){t=t||r,i&&(t in i&&(i=i[t]),typeof i=="function"&&s&&(i=i()))}),i=(i==null||i==r?e:i)+"",i};return function(t,r){return String(t).replace(e,function(e,t){return n(e,t,r)})}}(),t.ninja=function(){return f.was?a.win.Raphael=f.is:delete Raphael,t},t.st=Hn,function(e,n,r){function i(){/in/.test(e.readyState)?setTimeout(i,9):t.eve("raphael.DOMload")}e.readyState==null&&e.addEventListener&&(e.addEventListener(n,r=function(){e.removeEventListener(n,r,!1),e.readyState="complete"},!1),e.readyState="loading"),i()}(document,"DOMContentLoaded"),f.was?a.win.Raphael=t:Raphael=t,e.on("raphael.DOMload",function(){n=!0}),t}),define("../vendor/raphael.2.1.0.svg",["../vendor/raphael.2.1.0.core"],function(e){if(!e.svg)return;var t="hasOwnProperty",n=String,r=parseFloat,i=parseInt,s=Math,o=s.max,u=s.abs,a=s.pow,f=/[, ]+/,l=e.eve,c="",h=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},v={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(r,i){if(i){typeof r=="string"&&(r=m(r));for(var s in i)i[t](s)&&(s.substring(0,6)=="xlink:"?r.setAttributeNS(p,s.substring(6),n(i[s])):r.setAttribute(s,n(i[s])))}else r=e._g.doc.createElementNS("http://www.w3.org/2000/svg",r),r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},g=function(t,i){var f="linear",l=t.id+i,h=.5,p=.5,d=t.node,v=t.paper,g=d.style,y=e._g.doc.getElementById(l);if(!y){i=n(i).replace(e._radial_gradient,function(e,t,n){f="radial";if(t&&n){h=r(t),p=r(n);var i=(p>.5)*2-1;a(h-.5,2)+a(p-.5,2)>.25&&(p=s.sqrt(.25-a(h-.5,2))*i+.5)&&p!=.5&&(p=p.toFixed(5)-1e-5*i)}return c}),i=i.split(/\s*\-\s*/);if(f=="linear"){var b=i.shift();b=-r(b);if(isNaN(b))return null;var w=[0,0,s.cos(e.rad(b)),s.sin(e.rad(b))],E=1/(o(u(w[2]),u(w[3]))||1);w[2]*=E,w[3]*=E,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var S=e._parseDots(i);if(!S)return null;l=l.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&l!=t.gradient.id&&(v.defs.removeChild(t.gradient),delete t.gradient);if(!t.gradient){y=m(f+"Gradient",{id:l}),t.gradient=y,m(y,f=="radial"?{fx:h,fy:p}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:t.matrix.invert()}),v.defs.appendChild(y);for(var x=0,T=S.length;x<T;x++)y.appendChild(m("stop",{offset:S[x].offset?S[x].offset:x?"100%":"0%","stop-color":S[x].color||"#fff"}))}}return m(d,{fill:"url(#"+l+")",opacity:1,"fill-opacity":1}),g.fill=c,g.opacity=1,g.fillOpacity=1,1},y=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},b=function(r,i,s){if(r.type=="path"){var o=n(i).toLowerCase().split("-"),u=r.paper,a=s?"end":"start",f=r.node,l=r.attrs,h=l["stroke-width"],p=o.length,g="classic",y,b,w,E,S,x=3,T=3,N=5;while(p--)switch(o[p]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":g=o[p];break;case"wide":T=5;break;case"narrow":T=2;break;case"long":x=5;break;case"short":x=2}g=="open"?(x+=2,T+=2,N+=2,w=1,E=s?4:1,S={fill:"none",stroke:l.stroke}):(E=w=x/2,S={fill:l.stroke,stroke:"none"}),r._.arrows?s?(r._.arrows.endPath&&v[r._.arrows.endPath]--,r._.arrows.endMarker&&v[r._.arrows.endMarker]--):(r._.arrows.startPath&&v[r._.arrows.startPath]--,r._.arrows.startMarker&&v[r._.arrows.startMarker]--):r._.arrows={};if(g!="none"){var C="raphael-marker-"+g,k="raphael-marker-"+a+g+x+T;e._g.doc.getElementById(C)?v[C]++:(u.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:d[g],id:C})),v[C]=1);var L=e._g.doc.getElementById(k),A;L?(v[k]++,A=L.getElementsByTagName("use")[0]):(L=m(m("marker"),{id:k,markerHeight:T,markerWidth:x,orient:"auto",refX:E,refY:T/2}),A=m(m("use"),{"xlink:href":"#"+C,transform:(s?"rotate(180 "+x/2+" "+T/2+") ":c)+"scale("+x/N+","+T/N+")","stroke-width":(1/((x/N+T/N)/2)).toFixed(4)}),L.appendChild(A),u.defs.appendChild(L),v[k]=1),m(A,S);var O=w*(g!="diamond"&&g!="oval");s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-O*h):(y=O*h,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),S={},S["marker-"+a]="url(#"+k+")";if(b||y)S.d=Raphael.getSubpath(l.path,y,b);m(f,S),r._.arrows[a+"Path"]=C,r._.arrows[a+"Marker"]=k,r._.arrows[a+"dx"]=O,r._.arrows[a+"Type"]=g,r._.arrows[a+"String"]=i}else s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-y):(y=0,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),r._.arrows[a+"Path"]&&m(f,{d:Raphael.getSubpath(l.path,y,b)}),delete r._.arrows[a+"Path"],delete r._.arrows[a+"Marker"],delete r._.arrows[a+"dx"],delete r._.arrows[a+"Type"],delete r._.arrows[a+"String"];for(S in v)if(v[t](S)&&!v[S]){var M=e._g.doc.getElementById(S);M&&M.parentNode.removeChild(M)}}},w={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},E=function(e,t,r){t=w[n(t).toLowerCase()];if(t){var i=e.attrs["stroke-width"]||"1",s={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,o=[],u=t.length;while(u--)o[u]=t[u]*i+(u%2?1:-1)*s;m(e.node,{"stroke-dasharray":o.join(",")})}},S=function(r,s){var a=r.node,l=r.attrs,h=a.style.visibility;a.style.visibility="hidden";for(var d in s)if(s[t](d)){if(!e._availableAttrs[t](d))continue;var v=s[d];l[d]=v;switch(d){case"blur":r.blur(v);break;case"href":case"title":case"target":var w=a.parentNode;if(w.tagName.toLowerCase()!="a"){var S=m("a");w.insertBefore(S,a),S.appendChild(a),w=S}d=="target"?w.setAttributeNS(p,"show",v=="blank"?"new":v):w.setAttributeNS(p,d,v);break;case"cursor":a.style.cursor=v;break;case"transform":r.transform(v);break;case"arrow-start":b(r,v);break;case"arrow-end":b(r,v,1);break;case"clip-rect":var x=n(v).split(f);if(x.length==4){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var N=m("clipPath"),C=m("rect");N.id=e.createUUID(),m(C,{x:x[0],y:x[1],width:x[2],height:x[3]}),N.appendChild(C),r.paper.defs.appendChild(N),m(a,{"clip-path":"url(#"+N.id+")"}),r.clip=C}if(!v){var k=a.getAttribute("clip-path");if(k){var L=e._g.doc.getElementById(k.replace(/(^url\(#|\)$)/g,c));L&&L.parentNode.removeChild(L),m(a,{"clip-path":c}),delete r.clip}}break;case"path":r.type=="path"&&(m(a,{d:v?l.path=e._pathToAbsolute(v):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1)));break;case"width":a.setAttribute(d,v),r._.dirty=1;if(!l.fx)break;d="x",v=l.x;case"x":l.fx&&(v=-l.x-(l.width||0));case"rx":if(d=="rx"&&r.type=="rect")break;case"cx":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"height":a.setAttribute(d,v),r._.dirty=1;if(!l.fy)break;d="y",v=l.y;case"y":l.fy&&(v=-l.y-(l.height||0));case"ry":if(d=="ry"&&r.type=="rect")break;case"cy":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"r":r.type=="rect"?m(a,{rx:v,ry:v}):a.setAttribute(d,v),r._.dirty=1;break;case"src":r.type=="image"&&a.setAttributeNS(p,"href",v);break;case"stroke-width":if(r._.sx!=1||r._.sy!=1)v/=o(u(r._.sx),u(r._.sy))||1;r.paper._vbSize&&(v*=r.paper._vbSize),a.setAttribute(d,v),l["stroke-dasharray"]&&E(r,l["stroke-dasharray"],s),r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"stroke-dasharray":E(r,v,s);break;case"fill":var A=n(v).match(e._ISURL);if(A){N=m("pattern");var O=m("image");N.id=e.createUUID(),m(N,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(O,{x:0,y:0,"xlink:href":A[1]}),N.appendChild(O),function(t){e._preload(A[1],function(){var e=this.offsetWidth,n=this.offsetHeight;m(t,{width:e,height:n}),m(O,{width:e,height:n}),r.paper.safari()})}(N),r.paper.defs.appendChild(N),m(a,{fill:"url(#"+N.id+")"}),r.pattern=N,r.pattern&&y(r);break}var M=e.getRGB(v);if(!M.error)delete s.gradient,delete l.gradient,!e.is(l.opacity,"undefined")&&e.is(s.opacity,"undefined")&&m(a,{opacity:l.opacity}),!e.is(l["fill-opacity"],"undefined")&&e.is(s["fill-opacity"],"undefined")&&m(a,{"fill-opacity":l["fill-opacity"]});else if((r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v)){if("opacity"in l||"fill-opacity"in l){var _=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(_){var D=_.getElementsByTagName("stop");m(D[D.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}}l.gradient=v,l.fill="none";break}M[t]("opacity")&&m(a,{"fill-opacity":M.opacity>1?M.opacity/100:M.opacity});case"stroke":M=e.getRGB(v),a.setAttribute(d,M.hex),d=="stroke"&&M[t]("opacity")&&m(a,{"stroke-opacity":M.opacity>1?M.opacity/100:M.opacity}),d=="stroke"&&r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"gradient":(r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v);break;case"opacity":l.gradient&&!l[t]("stroke-opacity")&&m(a,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(l.gradient){_=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c)),_&&(D=_.getElementsByTagName("stop"),m(D[D.length-1],{"stop-opacity":v}));break};default:d=="font-size"&&(v=i(v,10)+"px");var P=d.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});a.style[P]=v,r._.dirty=1,a.setAttribute(d,v)}}T(r,s),a.style.visibility=h},x=1.2,T=function(r,s){if(r.type!="text"||!(s[t]("text")||s[t]("font")||s[t]("font-size")||s[t]("x")||s[t]("y")))return;var o=r.attrs,u=r.node,a=u.firstChild?i(e._g.doc.defaultView.getComputedStyle(u.firstChild,c).getPropertyValue("font-size"),10):10;if(s[t]("text")){o.text=s.text;while(u.firstChild)u.removeChild(u.firstChild);var f=n(s.text).split("\n"),l=[],h;for(var p=0,d=f.length;p<d;p++)h=m("tspan"),p&&m(h,{dy:a*x,x:o.x}),h.appendChild(e._g.doc.createTextNode(f[p])),u.appendChild(h),l[p]=h}else{l=u.getElementsByTagName("tspan");for(p=0,d=l.length;p<d;p++)p?m(l[p],{dy:a*x,x:o.x}):m(l[0],{dy:0})}m(u,{x:o.x,y:o.y}),r._.dirty=1;var v=r._getBBox(),g=o.y-(v.y+v.height/2);g&&e.is(g,"finite")&&m(l[0],{dy:g})},N=function(t,n){var r=0,i=0;this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},C=e.el;N.prototype=C,C.constructor=N,e._engine.path=function(e,t){var n=m("path");t.canvas&&t.canvas.appendChild(n);var r=new N(n,t);return r.type="path",S(r,{fill:"none",stroke:"#000",path:e}),r},C.rotate=function(e,t,i){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),i==null&&(t=i);if(t==null||i==null){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this.transform(this._.transform.concat([["r",e,t,i]])),this},C.scale=function(e,t,i,s){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3])),e=r(e[0]),t==null&&(t=e),s==null&&(i=s);if(i==null||s==null)var o=this.getBBox(1);return i=i==null?o.x+o.width/2:i,s=s==null?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this},C.translate=function(e,t){return this.removed?this:(e=n(e).split(f),e.length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]])),this)},C.transform=function(n){var r=this._;if(n==null)return r.transform;e._extractTransform(this,n),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix});if(r.sx!=1||r.sy!=1){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},C.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},C.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},C.remove=function(){if(this.removed||!this.node.parentNode)return;var t=this.paper;t.__set__&&t.__set__.exclude(this),l.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),e._tear(this,t),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var n in this)this[n]=typeof this[n]=="function"?e._removedFactory(n):null;this.removed=!0},C._getBBox=function(){if(this.node.style.display=="none"){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(n){}finally{t=t||{}}return e&&this.hide(),t},C.attr=function(n,r){if(this.removed)return this;if(n==null){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(r==null&&e.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;var o=n.split(f),u={};for(var a=0,c=o.length;a<c;a++)n=o[a],n in this.attrs?u[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?u[n]=this.paper.customAttributes[n].def:u[n]=e._availableAttrs[n];return c-1?u:u[o[0]]}if(r==null&&e.is(n,"array")){u={};for(a=0,c=n.length;a<c;a++)u[n[a]]=this.attr(n[a]);return u}if(r!=null){var h={};h[n]=r}else n!=null&&e.is(n,"object")&&(h=n);for(var p in h)l("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(h[p]));this.attrs[p]=h[p];for(var v in d)d[t](v)&&(h[v]=d[v])}return S(this,h),this},C.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&e._tofront(this,t),this},C.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;t.tagName.toLowerCase()=="a"?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper);var n=this.paper;return this},C.insertAfter=function(t){if(this.removed)return this;var n=t.node||t[t.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this},C.insertBefore=function(t){if(this.removed)return this;var n=t.node||t[0].node;return n.parentNode.insertBefore(this.node,n),e._insertbefore(this,t,this.paper),this},C.blur=function(t){var n=this;if(+t!==0){var r=m("filter"),i=m("feGaussianBlur");n.attrs.blur=t,r.id=e.createUUID(),m(i,{stdDeviation:+t||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,m(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},e._engine.circle=function(e,t,n,r){var i=m("circle");e.canvas&&e.canvas.appendChild(i);var s=new N(i,e);return s.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},s.type="circle",m(i,s.attrs),s},e._engine.rect=function(e,t,n,r,i,s){var o=m("rect");e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:t,y:n,width:r,height:i,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},u.type="rect",m(o,u.attrs),u},e._engine.ellipse=function(e,t,n,r,i){var s=m("ellipse");e.canvas&&e.canvas.appendChild(s);var o=new N(s,e);return o.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},o.type="ellipse",m(s,o.attrs),o},e._engine.image=function(e,t,n,r,i,s){var o=m("image");m(o,{x:n,y:r,width:i,height:s,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:n,y:r,width:i,height:s,src:t},u.type="image",u},e._engine.text=function(t,n,r,i){var s=m("text");t.canvas&&t.canvas.appendChild(s);var o=new N(s,t);return o.attrs={x:n,y:r,"text-anchor":"middle",text:i,font:e._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",S(o,o.attrs),o},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container,r=t.x,i=t.y,s=t.width,o=t.height;if(!n)throw new Error("SVG container not found.");var u=m("svg"),a="overflow:hidden;",f;return r=r||0,i=i||0,s=s||512,o=o||342,m(u,{height:o,version:1.1,width:s,xmlns:"http://www.w3.org/2000/svg"}),n==1?(u.style.cssText=a+"position:absolute;left:"+r+"px;top:"+i+"px",e._g.doc.body.appendChild(u),f=1):(u.style.cssText=a+"position:relative",n.firstChild?n.insertBefore(u,n.firstChild):n.appendChild(u)),n=new e._Paper,n.width=s,n.height=o,n.canvas=u,n.clear(),n._left=n._top=0,f&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,r,i){l("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var s=o(n/this.width,r/this.height),u=this.top,a=i?"meet":"xMinYMin",f,c;e==null?(this._vbSize&&(s=1),delete this._vbSize,f="0 0 "+this.width+h+this.height):(this._vbSize=s,f=e+h+t+h+n+h+r),m(this.canvas,{viewBox:f,preserveAspectRatio:a});while(s&&u)c="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":c}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[e,t,n,r,!!i],this},e.prototype.renderfix=function(){var e=this.canvas,t=e.style,n;try{n=e.getScreenCTM()||e.createSVGMatrix()}catch(r){n=e.createSVGMatrix()}var i=-n.e%1,s=-n.f%1;if(i||s)i&&(this._left=(this._left+i)%1,t.left=this._left+"px"),s&&(this._top=(this._top+s)%1,t.top=this._top+"px")},e.prototype.clear=function(){e.eve("raphael.clear",this);var t=this.canvas;while(t.firstChild)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(e._g.doc.createTextNode("Created with Raphaël "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},e.prototype.remove=function(){l("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null};var k=e.st;for(var L in C)C[t](L)&&!k[t](L)&&(k[L]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(L));return e}),define("../vendor/raphael.2.1.0.vml",["../vendor/raphael.2.1.0.core"],function(e){if(!e.svg)return;var t="hasOwnProperty",n=String,r=parseFloat,i=parseInt,s=Math,o=s.max,u=s.abs,a=s.pow,f=/[, ]+/,l=e.eve,c="",h=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},v={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(r,i){if(i){typeof r=="string"&&(r=m(r));for(var s in i)i[t](s)&&(s.substring(0,6)=="xlink:"?r.setAttributeNS(p,s.substring(6),n(i[s])):r.setAttribute(s,n(i[s])))}else r=e._g.doc.createElementNS("http://www.w3.org/2000/svg",r),r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},g=function(t,i){var f="linear",l=t.id+i,h=.5,p=.5,d=t.node,v=t.paper,g=d.style,y=e._g.doc.getElementById(l);if(!y){i=n(i).replace(e._radial_gradient,function(e,t,n){f="radial";if(t&&n){h=r(t),p=r(n);var i=(p>.5)*2-1;a(h-.5,2)+a(p-.5,2)>.25&&(p=s.sqrt(.25-a(h-.5,2))*i+.5)&&p!=.5&&(p=p.toFixed(5)-1e-5*i)}return c}),i=i.split(/\s*\-\s*/);if(f=="linear"){var b=i.shift();b=-r(b);if(isNaN(b))return null;var w=[0,0,s.cos(e.rad(b)),s.sin(e.rad(b))],E=1/(o(u(w[2]),u(w[3]))||1);w[2]*=E,w[3]*=E,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var S=e._parseDots(i);if(!S)return null;l=l.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&l!=t.gradient.id&&(v.defs.removeChild(t.gradient),delete t.gradient);if(!t.gradient){y=m(f+"Gradient",{id:l}),t.gradient=y,m(y,f=="radial"?{fx:h,fy:p}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:t.matrix.invert()}),v.defs.appendChild(y);for(var x=0,T=S.length;x<T;x++)y.appendChild(m("stop",{offset:S[x].offset?S[x].offset:x?"100%":"0%","stop-color":S[x].color||"#fff"}))}}return m(d,{fill:"url(#"+l+")",opacity:1,"fill-opacity":1}),g.fill=c,g.opacity=1,g.fillOpacity=1,1},y=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},b=function(r,i,s){if(r.type=="path"){var o=n(i).toLowerCase().split("-"),u=r.paper,a=s?"end":"start",f=r.node,l=r.attrs,h=l["stroke-width"],p=o.length,g="classic",y,b,w,E,S,x=3,T=3,N=5;while(p--)switch(o[p]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":g=o[p];break;case"wide":T=5;break;case"narrow":T=2;break;case"long":x=5;break;case"short":x=2}g=="open"?(x+=2,T+=2,N+=2,w=1,E=s?4:1,S={fill:"none",stroke:l.stroke}):(E=w=x/2,S={fill:l.stroke,stroke:"none"}),r._.arrows?s?(r._.arrows.endPath&&v[r._.arrows.endPath]--,r._.arrows.endMarker&&v[r._.arrows.endMarker]--):(r._.arrows.startPath&&v[r._.arrows.startPath]--,r._.arrows.startMarker&&v[r._.arrows.startMarker]--):r._.arrows={};if(g!="none"){var C="raphael-marker-"+g,k="raphael-marker-"+a+g+x+T;e._g.doc.getElementById(C)?v[C]++:(u.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:d[g],id:C})),v[C]=1);var L=e._g.doc.getElementById(k),A;L?(v[k]++,A=L.getElementsByTagName("use")[0]):(L=m(m("marker"),{id:k,markerHeight:T,markerWidth:x,orient:"auto",refX:E,refY:T/2}),A=m(m("use"),{"xlink:href":"#"+C,transform:(s?"rotate(180 "+x/2+" "+T/2+") ":c)+"scale("+x/N+","+T/N+")","stroke-width":(1/((x/N+T/N)/2)).toFixed(4)}),L.appendChild(A),u.defs.appendChild(L),v[k]=1),m(A,S);var O=w*(g!="diamond"&&g!="oval");s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-O*h):(y=O*h,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),S={},S["marker-"+a]="url(#"+k+")";if(b||y)S.d=Raphael.getSubpath(l.path,y,b);m(f,S),r._.arrows[a+"Path"]=C,r._.arrows[a+"Marker"]=k,r._.arrows[a+"dx"]=O,r._.arrows[a+"Type"]=g,r._.arrows[a+"String"]=i}else s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-y):(y=0,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),r._.arrows[a+"Path"]&&m(f,{d:Raphael.getSubpath(l.path,y,b)}),delete r._.arrows[a+"Path"],delete r._.arrows[a+"Marker"],delete r._.arrows[a+"dx"],delete r._.arrows[a+"Type"],delete r._.arrows[a+"String"];for(S in v)if(v[t](S)&&!v[S]){var M=e._g.doc.getElementById(S);M&&M.parentNode.removeChild(M)}}},w={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},E=function(e,t,r){t=w[n(t).toLowerCase()];if(t){var i=e.attrs["stroke-width"]||"1",s={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,o=[],u=t.length;while(u--)o[u]=t[u]*i+(u%2?1:-1)*s;m(e.node,{"stroke-dasharray":o.join(",")})}},S=function(r,s){var a=r.node,l=r.attrs,h=a.style.visibility;a.style.visibility="hidden";for(var d in s)if(s[t](d)){if(!e._availableAttrs[t](d))continue;var v=s[d];l[d]=v;switch(d){case"blur":r.blur(v);break;case"href":case"title":case"target":var w=a.parentNode;if(w.tagName.toLowerCase()!="a"){var S=m("a");w.insertBefore(S,a),S.appendChild(a),w=S}d=="target"?w.setAttributeNS(p,"show",v=="blank"?"new":v):w.setAttributeNS(p,d,v);break;case"cursor":a.style.cursor=v;break;case"transform":r.transform(v);break;case"arrow-start":b(r,v);break;case"arrow-end":b(r,v,1);break;case"clip-rect":var x=n(v).split(f);if(x.length==4){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var N=m("clipPath"),C=m("rect");N.id=e.createUUID(),m(C,{x:x[0],y:x[1],width:x[2],height:x[3]}),N.appendChild(C),r.paper.defs.appendChild(N),m(a,{"clip-path":"url(#"+N.id+")"}),r.clip=C}if(!v){var k=a.getAttribute("clip-path");if(k){var L=e._g.doc.getElementById(k.replace(/(^url\(#|\)$)/g,c));L&&L.parentNode.removeChild(L),m(a,{"clip-path":c}),delete r.clip}}break;case"path":r.type=="path"&&(m(a,{d:v?l.path=e._pathToAbsolute(v):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1)));break;case"width":a.setAttribute(d,v),r._.dirty=1;if(!l.fx)break;d="x",v=l.x;case"x":l.fx&&(v=-l.x-(l.width||0));case"rx":if(d=="rx"&&r.type=="rect")break;case"cx":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"height":a.setAttribute(d,v),r._.dirty=1;if(!l.fy)break;d="y",v=l.y;case"y":l.fy&&(v=-l.y-(l.height||0));case"ry":if(d=="ry"&&r.type=="rect")break;case"cy":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"r":r.type=="rect"?m(a,{rx:v,ry:v}):a.setAttribute(d,v),r._.dirty=1;break;case"src":r.type=="image"&&a.setAttributeNS(p,"href",v);break;case"stroke-width":if(r._.sx!=1||r._.sy!=1)v/=o(u(r._.sx),u(r._.sy))||1;r.paper._vbSize&&(v*=r.paper._vbSize),a.setAttribute(d,v),l["stroke-dasharray"]&&E(r,l["stroke-dasharray"],s),r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"stroke-dasharray":E(r,v,s);break;case"fill":var A=n(v).match(e._ISURL);if(A){N=m("pattern");var O=m("image");N.id=e.createUUID(),m(N,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(O,{x:0,y:0,"xlink:href":A[1]}),N.appendChild(O),function(t){e._preload(A[1],function(){var e=this.offsetWidth,n=this.offsetHeight;m(t,{width:e,height:n}),m(O,{width:e,height:n}),r.paper.safari()})}(N),r.paper.defs.appendChild(N),m(a,{fill:"url(#"+N.id+")"}),r.pattern=N,r.pattern&&y(r);break}var M=e.getRGB(v);if(!M.error)delete s.gradient,delete l.gradient,!e.is(l.opacity,"undefined")&&e.is(s.opacity,"undefined")&&m(a,{opacity:l.opacity}),!e.is(l["fill-opacity"],"undefined")&&e.is(s["fill-opacity"],"undefined")&&m(a,{"fill-opacity":l["fill-opacity"]});else if((r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v)){if("opacity"in l||"fill-opacity"in l){var _=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(_){var D=_.getElementsByTagName("stop");m(D[D.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}}l.gradient=v,l.fill="none";break}M[t]("opacity")&&m(a,{"fill-opacity":M.opacity>1?M.opacity/100:M.opacity});case"stroke":M=e.getRGB(v),a.setAttribute(d,M.hex),d=="stroke"&&M[t]("opacity")&&m(a,{"stroke-opacity":M.opacity>1?M.opacity/100:M.opacity}),d=="stroke"&&r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"gradient":(r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v);break;case"opacity":l.gradient&&!l[t]("stroke-opacity")&&m(a,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(l.gradient){_=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c)),_&&(D=_.getElementsByTagName("stop"),m(D[D.length-1],{"stop-opacity":v}));break};default:d=="font-size"&&(v=i(v,10)+"px");var P=d.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});a.style[P]=v,r._.dirty=1,a.setAttribute(d,v)}}T(r,s),a.style.visibility=h},x=1.2,T=function(r,s){if(r.type!="text"||!(s[t]("text")||s[t]("font")||s[t]("font-size")||s[t]("x")||s[t]("y")))return;var o=r.attrs,u=r.node,a=u.firstChild?i(e._g.doc.defaultView.getComputedStyle(u.firstChild,c).getPropertyValue("font-size"),10):10;if(s[t]("text")){o.text=s.text;while(u.firstChild)u.removeChild(u.firstChild);var f=n(s.text).split("\n"),l=[],h;for(var p=0,d=f.length;p<d;p++)h=m("tspan"),p&&m(h,{dy:a*x,x:o.x}),h.appendChild(e._g.doc.createTextNode(f[p])),u.appendChild(h),l[p]=h}else{l=u.getElementsByTagName("tspan");for(p=0,d=l.length;p<d;p++)p?m(l[p],{dy:a*x,x:o.x}):m(l[0],{dy:0})}m(u,{x:o.x,y:o.y}),r._.dirty=1;var v=r._getBBox(),g=o.y-(v.y+v.height/2);g&&e.is(g,"finite")&&m(l[0],{dy:g})},N=function(t,n){var r=0,i=0;this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},C=e.el;N.prototype=C,C.constructor=N,e._engine.path=function(e,t){var n=m("path");t.canvas&&t.canvas.appendChild(n);var r=new N(n,t);return r.type="path",S(r,{fill:"none",stroke:"#000",path:e}),r},C.rotate=function(e,t,i){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),i==null&&(t=i);if(t==null||i==null){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this.transform(this._.transform.concat([["r",e,t,i]])),this},C.scale=function(e,t,i,s){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3])),e=r(e[0]),t==null&&(t=e),s==null&&(i=s);if(i==null||s==null)var o=this.getBBox(1);return i=i==null?o.x+o.width/2:i,s=s==null?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this},C.translate=function(e,t){return this.removed?this:(e=n(e).split(f),e.length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]])),this)},C.transform=function(n){var r=this._;if(n==null)return r.transform;e._extractTransform(this,n),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix});if(r.sx!=1||r.sy!=1){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},C.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},C.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},C.remove=function(){if(this.removed||!this.node.parentNode)return;var t=this.paper;t.__set__&&t.__set__.exclude(this),l.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),e._tear(this,t),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var n in this)this[n]=typeof this[n]=="function"?e._removedFactory(n):null;this.removed=!0},C._getBBox=function(){if(this.node.style.display=="none"){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(n){}finally{t=t||{}}return e&&this.hide(),t},C.attr=function(n,r){if(this.removed)return this;if(n==null){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(r==null&&e.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;var o=n.split(f),u={};for(var a=0,c=o.length;a<c;a++)n=o[a],n in this.attrs?u[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?u[n]=this.paper.customAttributes[n].def:u[n]=e._availableAttrs[n];return c-1?u:u[o[0]]}if(r==null&&e.is(n,"array")){u={};for(a=0,c=n.length;a<c;a++)u[n[a]]=this.attr(n[a]);return u}if(r!=null){var h={};h[n]=r}else n!=null&&e.is(n,"object")&&(h=n);for(var p in h)l("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(h[p]));this.attrs[p]=h[p];for(var v in d)d[t](v)&&(h[v]=d[v])}return S(this,h),this},C.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&e._tofront(this,t),this},C.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;t.tagName.toLowerCase()=="a"?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper);var n=this.paper;return this},C.insertAfter=function(t){if(this.removed)return this;var n=t.node||t[t.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this},C.insertBefore=function(t){if(this.removed)return this;var n=t.node||t[0].node;return n.parentNode.insertBefore(this.node,n),e._insertbefore(this,t,this.paper),this},C.blur=function(t){var n=this;if(+t!==0){var r=m("filter"),i=m("feGaussianBlur");n.attrs.blur=t,r.id=e.createUUID(),m(i,{stdDeviation:+t||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,m(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},e._engine.circle=function(e,t,n,r){var i=m("circle");e.canvas&&e.canvas.appendChild(i);var s=new N(i,e);return s.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},s.type="circle",m(i,s.attrs),s},e._engine.rect=function(e,t,n,r,i,s){var o=m("rect");e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:t,y:n,width:r,height:i,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},u.type="rect",m(o,u.attrs),u},e._engine.ellipse=function(e,t,n,r,i){var s=m("ellipse");e.canvas&&e.canvas.appendChild(s);var o=new N(s,e);return o.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},o.type="ellipse",m(s,o.attrs),o},e._engine.image=function(e,t,n,r,i,s){var o=m("image");m(o,{x:n,y:r,width:i,height:s,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:n,y:r,width:i,height:s,src:t},u.type="image",u},e._engine.text=function(t,n,r,i){var s=m("text");t.canvas&&t.canvas.appendChild(s);var o=new N(s,t);return o.attrs={x:n,y:r,"text-anchor":"middle",text:i,font:e._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",S(o,o.attrs),o},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container,r=t.x,i=t.y,s=t.width,o=t.height;if(!n)throw new Error("SVG container not found.");var u=m("svg"),a="overflow:hidden;",f;return r=r||0,i=i||0,s=s||512,o=o||342,m(u,{height:o,version:1.1,width:s,xmlns:"http://www.w3.org/2000/svg"}),n==1?(u.style.cssText=a+"position:absolute;left:"+r+"px;top:"+i+"px",e._g.doc.body.appendChild(u),f=1):(u.style.cssText=a+"position:relative",n.firstChild?n.insertBefore(u,n.firstChild):n.appendChild(u)),n=new e._Paper,n.width=s,n.height=o,n.canvas=u,n.clear(),n._left=n._top=0,f&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,r,i){l("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var s=o(n/this.width,r/this.height),u=this.top,a=i?"meet":"xMinYMin",f,c;e==null?(this._vbSize&&(s=1),delete this._vbSize,f="0 0 "+this.width+h+this.height):(this._vbSize=s,f=e+h+t+h+n+h+r),m(this.canvas,{viewBox:f,preserveAspectRatio:a});while(s&&u)c="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":c}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[e,t,n,r,!!i],this},e.prototype.renderfix=function(){var e=this.canvas,t=e.style,n;try{n=e.getScreenCTM()||e.createSVGMatrix()}catch(r){n=e.createSVGMatrix()}var i=-n.e%1,s=-n.f%1;if(i||s)i&&(this._left=(this._left+i)%1,t.left=this._left+"px"),s&&(this._top=(this._top+s)%1,t.top=this._top+"px")},e.prototype.clear=function(){e.eve("raphael.clear",this);var t=this.canvas;while(t.firstChild)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(e._g.doc.createTextNode("Created with Raphaël "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},e.prototype.remove=function(){l("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null};var k=e.st;for(var L in C)C[t](L)&&!k[t](L)&&(k[L]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(L));return e}),define("raphael",["../vendor/raphael.2.1.0.core","../vendor/raphael.2.1.0.svg","../vendor/raphael.2.1.0.vml"],function(e){return e.ninja()}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("BoardView",["backbone","jquery","raphael"],function(e,n,r){var i;return i=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return t(i,e),i.prototype.el=n("#board"),i.prototype.initialize=function(e,t){return this.width=e,this.height=t,this.render()},i.prototype.render=function(){return this.mPaper=r(this.el,this.width,this.height)},i.prototype.paper=function(){return this.mPaper},i}(e.View)})}.call(this),function(){define("constants",{LEFT_ARROW:37,RIGHT_ARROW:39,SPACE:32,TICK:1e3/333,SPEED:.25,LEFT:-1,RIGHT:1})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("SpaceShipView",["backbone","constants"],function(e,n){var r;return r=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(e,t,n,r){return this.mPaper=e,this.$window=t,this.winWidth=n,this.position=r,this.render(),this.addKeyListeners(),this.moving=!1},r.prototype.addKeyListeners=function(){var e=this;return this.$window.keydown(function(t){var r,i;i=t.which;switch(i){case n.LEFT_ARROW:r=n.LEFT;break;case n.RIGHT_ARROW:r=n.RIGHT}return e.move(r)}),this.$window.keyup(function(t){var r,i;i=t.which;switch(i){case n.LEFT_ARROW:r=n.LEFT;break;case n.RIGHT_ARROW:r=n.RIGHT}return e.stop(r)})},r.prototype.render=function(){return this.mSelf=this.mPaper.image("img/rocket.png",this.position.x,this.position.y,84,97)},r.prototype.move=function(e){var t,r,i,s,o,u;if(e===this.moving)return;if(e==null)return;this.mSelf.stop(),this.moving=e,t=this.mSelf.getBBox(),s=t.width;switch(e){case n.LEFT:i=-20,o=Math.min(t.x,this.winWidth);break;case n.RIGHT:i=this.winWidth-80,o=Math.max(t.x,0)}return r=Math.abs(o-i),u=r/n.SPEED,this.mSelf.animate({x:""+i},u)},r.prototype.stop=function(e){if(e==null)return;if(e===this.moving)return this.moving=!1,this.mSelf.stop()},r.prototype.getBBox=function(){return this.mSelf.getBBox()},r}(e.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("PlanetView",["backbone","constants"],function(t,r){var i;return i=function(t){function i(){return this.fell=e(this.fell,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.selfWidth=100,i.prototype.selfHeight=63,i.prototype.initialize=function(e,t,n,r){return this.mPaper=e,this.$window=t,this.winWidth=n,this.winHeight=r,this.position={x:_.random(0,this.winWidth-this.selfWidth),y:0-this.selfHeight},this.render()},i.prototype.render=function(){return this.mSelf=this.mPaper.image("img/planet.png",this.position.x,this.position.y,this.selfWidth,this.selfHeight),this.fall()},i.prototype.fall=function(){var e,t,n,i;return e=this.winHeight-this.position.y,i=e/(r.SPEED*.3),t=this.winHeight+this.selfHeight,n=_.random(-90,90),this.mSelf.animate({y:t},i,this.fell)},i.prototype.fell=function(){return this.mSelf.remove()},i.prototype.getBBox=function(){return this.mSelf.getBBox()},i.prototype.stop=function(){return this.mSelf.stop()},i}(t.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("StarView",["backbone","constants"],function(t,r){var i;return i=function(t){function i(){return this.fell=e(this.fell,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.minRadius=1,i.prototype.maxRadius=5,i.prototype.initialize=function(e,t,n){return this.mPaper=e,this.winWidth=t,this.winHeight=n,this.position={x:_.random(0,this.winWidth),y:0},this.render()},i.prototype.render=function(){var e;return this.radius=_.random(this.minRadius,this.maxRadius),e=.2*this.radius,this.mSelf=this.mPaper.circle(this.position.x,this.position.y,this.radius),this.mSelf.attr({fill:"#FFF",opacity:e}),this.fall()},i.prototype.fall=function(){var e,t,n;return e=this.winHeight-this.position.y,n=6*e/(r.SPEED*this.radius),t=this.winHeight,this.mSelf.animate({cy:t},n,this.fell)},i.prototype.fell=function(){return this.mSelf.remove()},i}(t.View)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("GameEngine",["backbone","BoardView","SpaceShipView","PlanetView","StarView","constants","lodash","raphael"],function(e,n,r,i,s,o,u,a){var f;return f=function(e){function u(){return u.__super__.constructor.apply(this,arguments)}return t(u,e),u.prototype.starInterval=10,u.prototype.enemyInterval=60,u.prototype.initialize=function(){return this.$window=$(window),this.winHeight=this.$window.height(),this.winWidth=this.$window.width(),this.$score=$("#score"),this.age=0,this.starTicker=0,this.enemyTicker=0,this.planets=0,this.planetViews=[]},u.prototype.makeBoard=function(){return this.mBoardView=new n(this.winWidth,this.winHeight)},u.prototype.makeSpaceship=function(){var e;return e={x:this.winWidth/2,y:this.winHeight-250},this.mSpaceshipView=new r(this.mBoardView.paper(),this.$window,this.winWidth,e)},u.prototype.startTime=function(){var e=this;return this.ticker=setInterval(function(){return e.enemyTicker===e.enemyInterval&&(e.enemyTicker=0,--e.enemyInterval,e.createEnemy()),e.starTicker===e.starInterval&&(e.starTicker=0,e.createStar()),e.checkForCollisions(),++e.age,++e.starTicker,++e.enemyTicker},o.TICK)},u.prototype.createEnemy=function(){return--this.easiness,++this.planets,this.showScore(),this.planetViews.push(new i(this.mBoardView.paper(),this.$window,this.winWidth,this.winHeight))},u.prototype.createStar=function(){return new s(this.mBoardView.paper(),this.winWidth,this.winHeight)},u.prototype.showScore=function(){return this.$score.html("SCORE: "+this.planets)},u.prototype.checkForCollisions=function(){var e,t,n,r,i;r=this.planetViews,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.checkCollision(e));return i},u.prototype.checkCollision=function(e){var t,n,r,i,s;t=e.getBBox(),n=this.mSpaceshipView.getBBox();if(t!=null&&n!=null&&a.isBBoxIntersect(e.getBBox(),this.mSpaceshipView.getBBox())){clearInterval(this.ticker),s=this.planetViews;for(r=0,i=s.length;r<i;r++)e=s[r],e.stop();return alert("Game Over")}},u}(e.Model)})}.call(this),function(){require.config({shim:{lodash:{exports:"_"},backbone:{deps:["jquery","lodash"],exports:"Backbone"}},paths:{lodash:"../vendor/lodash.0.7.0",backbone:"../vendor/backbone.0.9.2",raphael:"../vendor/raphael.2.1.0.amd",constatns:"./constants",GameEngine:"./models/GameEngineModel",BoardView:"./views/BoardView",SpaceShipView:"./views/SpaceShipView",PlanetView:"./views/PlanetView",StarView:"./views/StarView"}}),require(["jquery","GameEngine"],function(e,t){var n;return n=new t,n.makeBoard(),n.makeSpaceship(),n.startTime()})}.call(this),define("main",[],function(){})